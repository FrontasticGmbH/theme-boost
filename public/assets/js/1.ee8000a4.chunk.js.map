{"version":3,"sources":["js/app/entity.js","js/domain/basket.js","js/domain/basketLoader.js","js/app/context.js","js/app/urlContext.js","js/app/loader/node.js","js/app/loader/data.js","js/app/loader/tastic.js","js/app/reducer.js","js/app/store.js","js/app/router.js","js/app/api.js","js/app/route.js","js/app/loader/context.js","js/app/loader.js","js/app/app.js","js/app/intlProvider.js","js/app/errorBoundary.jsx","js/component/markdown.jsx","js/tastic/content/tastic.jsx","js/tastic/contentList/tastic.jsx","js/tastic/categoryDescription/tastic.jsx","js/image.jsx","js/tastic/categoryImage/tastic.jsx","js/tastic/imageBanner/tastic.jsx","js/tastic/markdown/tastic.jsx","js/app/link.jsx","js/component/price.jsx","js/tastic/navigation/miniBasket.jsx","js/component/svgIcon.jsx","js/tastic/navigation/sequential.jsx","js/tastic/navigation/tastic.jsx","js/tastic/product/connector.js","js/tastic/product/title/tastic.jsx","js/component/slider.jsx","js/component/zoom.jsx","js/remoteImage.jsx","js/tastic/product/image/tastic.jsx","js/tastic/product/price/tastic.jsx","js/tastic/product/addToCart/tastic.jsx","js/tastic/product/description/tastic.jsx","js/tastic/product/tastic.jsx","js/tastic/product/brand/tastic.jsx","js/tastic/product/stock/tastic.jsx","js/component/productBox.jsx","js/tastic/productList/tastic.jsx","js/tastic/productListFilter/price/priceFacetPane.jsx","js/tastic/productListFilter/price/priceFacetTitle.jsx","js/tastic/productListFilter/toggleTerm.js","js/tastic/productListFilter/term/termFacetPane.jsx","js/tastic/productListFilter/term/termFacetTitle.jsx","js/tastic/productListFilter/selectionPane.jsx","js/tastic/productListFilter/tastic.jsx","js/tastic/productSlider/tastic.jsx","js/tastic/teaser/tastic.jsx","js/tastic/text/tastic.jsx","js/tastic/tastics.js","js/page/tastic.jsx","js/page/cell.jsx","js/page/region.jsx","js/page/layout.jsx","js/page/page.jsx","js/app/loading.jsx","js/preview.jsx","js/node.jsx","js/app.js","layout/noImage.svg","icons/icomoon_icons/SVG/cross.svg","layout/loading.svg","icons/icomoon_icons/SVG/arrow-left.svg","layout/fastDelivery.svg","icons/all_out.svg","icons/zoom_in.svg","icons/zoom_out.svg","icons/icomoon_icons/symbol-defs.svg","icons/icomoon_icons/SVG/bag.svg","layout/logo.svg"],"names":["Entity","data","arguments","length","undefined","ttl","this","loading","loaded","Date","error","isComplete","isCurrent","getTime","setError","purgeMap","map","newMap","key","purge","entity","basket","Basket","items","_classCallCheck","lodash_default","a","sumBy","basketLoader_BasketLoader","store","api","_this","add","product","variant","count","basketItems","getState","foundItem","find","basketItem","productId","id","push","dispatch","type","initialGlobalState","handleAction","globalState","action","Object","assign","basketLoader","app_context","Context","context","environment","locale","session","loggedIn","user","message","hasFeature","feature","features","contains","isLoggedIn","fromParameters","parameters","toParameters","project","projectId","isDevelopment","getLanguage","substr","indexOf","update","properties","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","Symbol","iterator","next","done","_ref","value","_ref2","_slicedToArray","property","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref3","_ref4","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref5","_ref6","customer","projects","UrlContext","getActionHash","JSON","stringify","getActionParameters","pickBy","charAt","hasChanged","lastRoute","route","urlContext","node_Loader","loadTree","trigger","root","loadNode","nodeId","reloadPreview","preview","loadMaster","request","node","cacheKey","node_initialGlobalState","trees","nodes","nodeData","pages","last","page","currentNodeId","currentCacheKey","extend","nextLoadingData","loader_node","data_Loader","get","dataId","data_initialGlobalState","loader_data","tastic_Loader","loadTastics","tastic_initialGlobalState","tastics","loader_tastic","reducer_initialGlobalState","app_reducer","redux","app","PRODUCTION","console","groupCollapsed","info","groupEnd","tastic","mountNode","document","getElementById","store_props","parse","getAttribute","app_store","redux_thunk_es","app_router","history","routes","parameterMatcher","location","allParameters","contextParameters","Error","getSimilarRoutes","join","keys","matches","exec","unknownKeys","difference","queryKeys","search","js","pick","pathname","reduce","link","replace","path","match","pattern","route_pattern_default","fromString","reactRoute","namedParams","state","setContext","setRoutes","sortBy","mapValues","distance","levenshtein_default","slice","app_api","router","_this3","intervals","method","body","success","fetch","headers","Headers","Accept","Content-Type","String","stringifyBody","credentials","cache","then","response","contentType","includes","json","ok","status","each","debugLine","_console","log","apply","_toConsumableArray","clearContinuousRequests","hasError","stack","requestContinuosly","_this2","refreshInterval","getReloadInterval","refreshFunction","interval","window","setInterval","actionId","routeKey","triggerContinuously","pauseRequests","i","clearInterval","resumeRequests","app_route","query","historyState","parameter","fallback","has","urlParameters","loader_context","refresh","getRouter","loadForLocation","login","email","password","loader","loaders","loadContentForPath","getLoader","name","Frontastic.ApiBundle.Api.context","visibility","registerCallBack","getApi","getStore","listen","app_history","index_es","addLocaleData","intlProvider_toConsumableArray","en_default","de_default","messages","en","de","intlProvider","es","language","dot_object_default","dot","errorBoundary_ErrorBoundary","ErrorBoundary","props","errorBoundary_classCallCheck","_possibleConstructorReturn","__proto__","getPrototypeOf","call","react","warn","setState","react_default","createElement","className","toString","children","propTypes","prop_types_default","any","defaultProps","errorBoundary","markdown_Markdown","componentDidMount","links","refs","markdown","querySelectorAll","onclick","event","preventDefault","text","defaultLanguage","ref","dangerouslySetInnerHTML","__html","lib","toHTML","object","isRequired","oneOfType","string","tastic_ContentTastic","content","configuration","stream","attributes","attribute","attributeId","content_tastic","tastic_ContentListTastic","contentList","total","contentId","href","contentList_tastic","tastic_CategoryDescriptionTastic","displayDescription","categoryDescription_tastic","image_Image","Image","image_classCallCheck","image_possibleConstructorReturn","mediaApi","_mediaApi$getImageDim","getImageDimensions","media","width","height","cropRatio","_mediaApi$getImageDim2","image_slicedToArray","style","alt","src","noImage_default","omit","onLoad","getImageLink","options","srcSet","factor","onError","number","js_image","react_sizer_lib_default","getSize","getElementDimensions","tastic_CategoryImageTastic","optionsFromSettings","imageSettings","displayImage","image","categoryImage_tastic","tastic_ImageBannerTastic","schema","size","verticalAlign","horizontalAlign","ratio","classnames_default","imageBanner_tastic","tastic_MarkdownTastic","markdown_tastic","link_SymfonyLink","childProps","params","to","Link","app_link","Price","toLocaleString","currency","price","miniBasket_MiniBasket","MiniBasket","miniBasket_classCallCheck","miniBasket_possibleConstructorReturn","showBasket","getItems","aria-label","onClick","data-icon","data-icon-size","bag_default","getProductCount","data-ft-sequential-nav","cross_default","item","align","colSpan","disabled","instanceOf","miniBasket","svgIcon_SvgIcon","version","xmlns","xlinkHref","symbol_defs_default","icon","svgIcon","sequential_Sequential","Sequential","sequential_classCallCheck","sequential_possibleConstructorReturn","showChildNavigation","level","pulledLeft","onClose","displayHighlightMenuItem","func","bool","sequential","tastic_NavigationTastic","NavigationTastic","navigation_tastic_classCallCheck","navigation_tastic_possibleConstructorReturn","showNavigation","depth","customLogo","tree","file","logo_default","navigation_tastic","connector","selectedVariant","variants","originalPrice","Math","round","charCodeAt","tastic_ProductTitleTastic","TitleHtmlComponent","title_tastic","slider_Slider","Slider","slider_classCallCheck","slider_possibleConstructorReturn","flickity","flickity_js_default","carousel","cellSelector","cellAlign","pageDots","prevNextButtons","contain","draggable","on","updateSelected","imagesLoaded","imagesloaded_default","resize","componentDidUpdate","reloadCells","componentWillUnmount","off","destroy","componentDidCatch","selected","selectedIndex","array","slider","INITIAL_X","INITIAL_Y","INITIAL_SCALE","settle","val","target","range","inverse","x","getPointFromEvent","touch","element","rect","getBoundingClientRect","clientX","left","y","clientY","top","getDistanceBetweenPoints","pointA","pointB","sqrt","pow","between","min","max","checkBetween","m1","m2","zoom_Zoom","Zoom","zoom_classCallCheck","zoom_possibleConstructorReturn","zoom_initialiseProps","scale","container","onTouchStart","handleTouchStart","onTouchMove","handleTouchMove","onTouchEnd","handleTouchEnd","onWheel","handleWheel","overflow","handleClick","zoom_in_default","zoom_out_default","reset","all_out_default","componentWillReceiveProps","zoomTo","midpoint","animation","requestAnimationFrame","frame","targetScale","zoom","distanceX","distanceY","targetX","targetY","nextWidth","nextHeight","cancelAnimationFrame","touches","handlePinchStart","handleTapStart","handlePinchMove","handlePanMove","lastMidpoint","lastTouchEnd","timeStamp","lastPanPoint","point","nextX","nextY","lastDistance","getMidpoint","MIN_SCALE","MAX_SCALE","stopPropagation","deltaY","zoomIn","remoteImage_RemoteImage","RemoteImage","remoteImage_classCallCheck","remoteImage_possibleConstructorReturn","url","remoteImage_slicedToArray","remoteImage","tastic_ProductImageTastic","ProductImageTastic","image_tastic_classCallCheck","image_tastic_possibleConstructorReturn","section","clientWidth","uniqueImages","uniq","flatten","pointerEvents","transform","transformOrigin","crop","background","image_tastic","tastic_ProductPriceTastic","showPercent","showStrikePrice","isReduced","c-price","u-text-l","c-price--highlight","ceil","price_tastic","addToCart_tastic_ProductPriceTastic","ProductPriceTastic","addToCart_tastic_classCallCheck","addToCart_tastic_possibleConstructorReturn","ucfirst","inString","toUpperCase","selectVariant","variantIndex","_variant","addToCart","indicateBaskedAdded","debounce","getVariantAttributes","attributeValues","values","showVariants","showNameInVariants","showPriceInVariants","variantAttributes","intersection","fade-exiting","fade-appeared","onChange","currentTarget","index","isOnStock","addToCart_tastic","tastic_ProductDescriptionTastic","description","ucFirst","description_tastic","tastic_ProductTastic","product_tastic","tastic_ProductBrandTastic","designer","BrandHtmlComponent","brand_tastic","tastic_ProductStockTastic","getNextOrderTime","date","setHours","setMinutes","setDate","getDate","getNextDeliveryDay","getDay","fastDelivery_default","day","month","stock_tastic","productBox_ProductBox","itemScope","itemType","itemProp","slug","images","c-teaser__price","productBox","tastic_ProductListTastic","productList","productList_tastic","priceFacetPane_PriceFacetPane","PriceFacetPane","priceFacetPane_classCallCheck","priceFacetPane_possibleConstructorReturn","priceFacetPane_initialiseProps","facet","step","toFixed","updateLower","updateUpper","rc_slider_es","allowCross","updateRange","trackStyle","backgroundColor","handleStyle","borderColor","railStyle","getDerivedStateFromProps","valueFromTastic","toInteger","facetValue","cloneDeep","updateFacet","e","floor","isEqual","removeFacetValue","selectFacetValue","priceFacetPane","priceFacetTitle_PriceFacetTitle","parseInt","priceFacetTitle","productListFilter_toggleTerm","term","selectedTerms","filter","terms","pull","handle","termFacetPane_TermFacetPane","termFacetPane","termFacetTitle_TermFacetTitle","renderSelectionPreview","selectedTermNames","termFacetTitle","selectionPane_SelectionPane","SelectionPane","selectionPane_classCallCheck","selectionPane_possibleConstructorReturn","facetMap","variants.attributes.style.key","selector","title","variants.price.centAmount","variants.attributes.gender.key","variants.attributes.designer","variants.attributes.color.key","getFacetValue","facetValues","renderFacetPane","ComponentClass","displayFacetDetails","closeFacet","arrow_left_default","valuesFromTastic","showFacet","facetsToShow","facets","show","TitleComponent","selectionPane","tastic_ProductListFilterTastic","ProductListFilterTastic","productListFilter_tastic_classCallCheck","productListFilter_tastic_possibleConstructorReturn","replaceUrl","getCurrentStreamParameters","getFacetValues","streamId","streamParameters","set","updateUrl","unset","newParameters","deriveRouteParameters","s","comeFromTastic","updatedParameters","closeFilterSelection","showFilterSelection","renderCategorySelector","categoryFacet","getCategoryFacet","filterCategoryTerms","htmlFor","uniqBy","remove","take","reverse","data-ft-sequential-nav-controls","productListFilter_tastic","tastic_ProductSliderTastic","productsToShow","productSlider_tastic","tastic_TeaserTastic","teaser","marginBottom","image1","text2","text3","image4","teaser_tastic","tastic_TextTastic","text_tastic","tastic_tastics","categoryDescription","categoryImage","imageBanner","navigation","productListFilter","product-title","product-image","product-brand","product-addToCart","product-description","product-stock","product-price","productSlider","tastic_Tastic","tasticType","Tastic","outline","tasticId","highlight","page_tastic","cell_Cell","columnMap","12","6","4","3","cell","columns","margin","padding","float","cellId","region","page_cell","region_Region","display","flexDirection","flexWrap","justifyContent","alignItems","alignContent","regionId","elements","page_region","layout_Layout","layoutId","identifier","regions","kit","head","main","footer","layout","page_PageView","PageView","page_classCallCheck","page_possibleConstructorReturn","layouts","Layout","getLayout","isArray","loading_LoadingState","isLoading","isErrored","large","react_transition_group","appear","in","timeout","loading_default","app_loading","preview_Preview","Preview","preview_classCallCheck","preview_possibleConstructorReturn","webSocket","connectWebSocket","addEventListener","bind","prevProps","close","removeEventListener","isTrusted","socketUrl","previewId","WebSocket","onmessage","Name","Payload","onclose","node_Node","react_custom_scrollbars_lib","autoHide","js_node","app_mountNode","appData","app_data","js_app_context","react_dom_default","render","es_Router","Switch","es_Route","exact","component","toArray","module","exports","__webpack_require__","p"],"mappings":"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","file":"assets/js/1.ee8000a4.chunk.js","sourcesContent":["/**\n * This is the base class for data fetched from the server.\n *\n * This class provides a isCurrent() method based on an entity specific\n * time-to-live (TTL) to check if the entity should be refetched.\n */\nlet Entity = function (data = null, ttl = 60) {\n    this.loading = !data\n    this.loaded = data ? new Date() : null\n    this.error = null\n    this.data = data\n    this.ttl = ttl\n\n    this.isComplete = function () {\n        return !this.loading && !this.error\n    }\n\n    this.isCurrent = function () {\n        if (!this.loaded || this.error) {\n            return false\n        }\n\n        if (this.loaded.getTime() > ((new Date()).getTime() - this.ttl * 1000)) {\n            return true\n        }\n\n        return false\n    }\n\n    this.setError = function (error) {\n        this.loading = false\n        this.loaded = null\n        this.error = error\n        this.data = null\n\n        return this\n    }\n}\n\nEntity.purgeMap = function (map) {\n    const newMap = {}\n    for (let key in map) {\n        if (map[key] && map[key].isCurrent && map[key].isCurrent()) {\n            newMap[key] = map[key]\n        }\n    }\n\n    return newMap\n}\n\nEntity.purge = function (entity) {\n    if (entity && entity.isCurrent()) {\n        return entity\n    }\n\n    return new Entity()\n}\n\nexport default Entity\n","import _ from 'lodash'\n\nclass Basket {\n    constructor (items = []) {\n        this.items = items\n    }\n\n    getItems () {\n        return this.items\n    }\n\n    getProductCount () {\n        return _.sumBy(this.items, 'count')\n    }\n}\n\nexport default Basket\n","import _ from 'lodash'\n\nimport Basket from './basket'\n\n/**\n * Loader classes like this consilidate all loading monitors for a domain\n * concept.\n *\n * They define one (or multiple) load() methods which execute an AJAX call\n * through the Api. You may implement parameter remapping and cache checks in\n * here. For the loaded date there should be a dispatched action through Redux.\n *\n * The Loader also defines a (static) method which handles its own actions and\n * applies the corresponding changes to the global store state.\n */\nlet BasketLoader = function (store, api) {\n    this.store = store\n    this.api = api\n\n    this.add = (product, variant, count) => {\n        let basketItems = this.store.getState().basket.basket.items\n\n        let foundItem = _.find(basketItems, (basketItem) => {\n            return (basketItem.product.productId === product.productId &&\n                basketItem.variant.id === variant.id)\n        })\n\n        if (foundItem) {\n            foundItem.count += count\n        } else {\n            basketItems.push({\n                product: product,\n                variant: variant,\n                count: count,\n            })\n        }\n\n        this.store.dispatch({\n            type: 'Domain.Basket.success',\n            data: {\n                items: basketItems,\n            },\n        })\n    }\n}\n\nconst initialGlobalState = {\n    basket: new Basket(),\n}\n\nBasketLoader.handleAction = (globalState = initialGlobalState, action) => {\n    switch (action.type) {\n    case 'FRONTASTIC_ROUTE':\n        // No purging, fake basket is persistent\n        return globalState\n\n    case 'Domain.Basket.success':\n        return {\n            ...globalState,\n            basket: new Basket(action.data.items),\n        }\n\n    default:\n    // Do nothing for other actions\n    }\n\n    return globalState\n}\n\nexport default BasketLoader\n","import _ from 'lodash'\n\nlet Context = function (context = {}) {\n    this.environment = 'production'\n    this.locale = 'en_GB'\n    this.session = {\n        loggedIn: false,\n        user: null,\n        message: null,\n    }\n\n    this.hasFeature = function (feature) {\n        return this.features && _.contains(this.features, feature)\n    }\n\n    this.isLoggedIn = function () {\n        return this.session && this.session.loggedIn\n    }\n\n    this.fromParameters = function (parameters) {\n    }\n\n    this.toParameters = function () {\n        return {\n            environment: this.environment,\n            project: this.project.projectId || null,\n            locale: this.locale,\n        }\n    }\n\n    this.isDevelopment = function () {\n        return this.environment === 'development'\n    }\n\n    this.getLanguage = function () {\n        return this.locale.substr(0, this.locale.indexOf('_'))\n    }\n\n    this.update = function (context = {}) {\n        let properties = {}\n\n        for (const [property, value] of Object.entries(this)) {\n            properties[property] = value\n        }\n\n        if (context.project && (typeof context.project === 'string')) {\n            properties.project.projectId = context.project\n            delete context.project\n        }\n\n        for (const [property, value] of Object.entries(context)) {\n            properties[property] = value\n        }\n\n        if (context.project && (typeof context.project === 'string')) {\n            properties.project.projectId = context.project\n        }\n\n        return new Context(properties)\n    }\n\n    for (const [property, value] of Object.entries(context)) {\n        this[property] = value\n    }\n\n    if (!this.project && this.customer) {\n        this.project = this.customer.projects[0]\n    }\n}\n\nexport default Context\n","import _ from 'lodash'\n\n/**\n * Provides unified handling of URL context.\n *\n * URL parameters that do not impact execution of a server action *MUST* be prefixed with an '_' (underscore). This\n * class allows working with action and non-action specific parameters.\n */\nclass UrlContext {\n    static getActionHash = (parameters) => {\n        return JSON.stringify(UrlContext.getActionParameters(parameters))\n    }\n\n    static getActionParameters = (parameters) => {\n        return _.pickBy(parameters, (value, key) => {\n            return (key.charAt(0) !== '_')\n        })\n    }\n\n    static hasChanged = (lastRoute, route) => {\n        if (!lastRoute) {\n            return true\n        }\n\n        if (lastRoute.route !== route.route) {\n            return true\n        }\n\n        return UrlContext.getActionHash(lastRoute.parameters) !== UrlContext.getActionHash(route.parameters)\n    }\n}\n\nexport default UrlContext\n","import _ from 'lodash'\n\nimport Entity from '../entity'\nimport UrlContext from '../urlContext'\n\n/**\n * Loader classes like this consolidate all loading monitors for a domain\n * concept.\n *\n * They define one (or multiple) load() methods which execute an AJAX call\n * through the Api. You may implement parameter remapping and cache checks in\n * here. For the loaded date there should be a dispatched action through Redux.\n *\n * The Loader also defines a (static) method which handles its own actions and\n * applies the corresponding changes to the global store state.\n */\nlet Loader = function (store, api) {\n    this.store = store\n    this.api = api\n\n    this.loadTree = (parameters) => {\n        this.api.trigger('Frontastic.Frontend.Node.tree', parameters, parameters.root || 'root')\n    }\n\n    this.loadNode = (parameters) => {\n        this.api.trigger('Frontastic.Frontend.Node.view', parameters, parameters.nodeId)\n    }\n\n    this.reloadPreview = (parameters) => {\n        this.api.trigger('Frontastic.Frontend.Preview.view', parameters, parameters.preview)\n    }\n\n    this.loadMaster = (route, parameters) => {\n        this.api.request(\n            'GET',\n            route,\n            parameters,\n            null,\n            (data, parameters) => {\n                this.store.dispatch({\n                    id: data.node.nodeId,\n                    cacheKey: UrlContext.getActionHash(parameters),\n                    type: 'Frontend.Master.view.success',\n                    data: data,\n                    parameters: parameters,\n                })\n            },\n            (error) => {\n                this.store.dispatch({\n                    id: null,\n                    cacheKey: UrlContext.getActionHash(parameters),\n                    type: 'Frontend.Master.view.error',\n                    error: error,\n                })\n            }\n        )\n    }\n}\n\nconst initialGlobalState = {\n    error: null,\n    trees: {},\n    nodes: {},\n    nodeData: {},\n    pages: {},\n    last: {\n        node: null,\n        data: null,\n        page: null,\n    },\n    currentNodeId: null,\n    currentCacheKey: null,\n}\n\nLoader.handleAction = (globalState = initialGlobalState, action) => {\n    let trees = {}\n    let nodes = {}\n    let nodeData = {}\n    let pages = {}\n\n    switch (action.type) {\n    case 'FRONTASTIC_ROUTE':\n        return {\n            error: null,\n            trees: Entity.purgeMap(globalState.trees),\n            nodes: Entity.purgeMap(globalState.nodes),\n            nodeData: Entity.purgeMap(globalState.nodeData),\n            pages: Entity.purgeMap(globalState.pages),\n            last: globalState.last,\n\n            // Setting the following two to `null` means a visible page load.\n            // We only want this if there is some major change, eg. if we need\n            // data from the server or the display structure changed.\n            currentNodeId: UrlContext.hasChanged(action.lastRoute, action.route) ? null : globalState.currentNodeId,\n            currentCacheKey: UrlContext.hasChanged(action.lastRoute, action.route) ? null : globalState.currentCacheKey,\n        }\n    case 'Frontend.Node.tree.success':\n        trees = _.extend({}, globalState.trees)\n        if (action.id) {\n            trees[action.id] = new Entity(action.data, 3600)\n        }\n\n        return {\n            ...globalState,\n            trees: trees,\n        }\n    case 'Frontend.Node.tree.error':\n        trees = _.extend({}, globalState.trees)\n        if (action.id) {\n            trees[action.id] = new Entity().setError(action.error)\n        }\n\n        return {\n            ...globalState,\n            trees: trees,\n        }\n\n    case 'Frontend.Node.view.success':\n    case 'Frontend.Master.view.success':\n    case 'Frontend.Preview.view.success':\n    case 'Frontend.Master.Error.view.success':\n        nodes = _.extend({}, globalState.nodes)\n        nodeData = _.extend({}, globalState.nodeData)\n        pages = _.extend({}, globalState.pages)\n        if (action.id) {\n            nodes[action.id] = new Entity(action.data.node, 3600)\n            nodeData[action.cacheKey] = new Entity(action.data.data, 3600)\n            pages[action.id] = new Entity(action.data.page, 3600)\n        }\n\n        let nextLoadingData = new Entity(action.data.data)\n        nextLoadingData.loading = true\n\n        return {\n            ...globalState,\n            currentNodeId: action.id,\n            currentCacheKey: action.cacheKey,\n            nodes: nodes,\n            nodeData: nodeData,\n            pages: pages,\n            last: {\n                node: new Entity(_.extend({}, action.data.node)),\n                data: nextLoadingData,\n                page: new Entity(_.extend({}, action.data.page)),\n            },\n        }\n    case 'Frontend.Node.view.error':\n    case 'Frontend.Master.view.error':\n    case 'Frontend.Preview.view.error':\n    case 'Frontend.Master.Error.view.error':\n        nodes = _.extend({}, globalState.nodes)\n        nodeData = _.extend({}, globalState.nodeData)\n        pages = _.extend({}, globalState.pages)\n        if (action.id) {\n            nodes[action.id] = new Entity().setError(action.error)\n            nodeData[action.cacheKey] = new Entity().setError(action.error)\n            pages[action.id] = new Entity().setError(action.error)\n        }\n\n        return {\n            ...globalState,\n            currentNodeId: action.id,\n            currentCacheKey: action.cacheKey,\n            nodes: nodes,\n            nodeData: nodeData,\n            pages: pages,\n        }\n\n    case 'Frontend.Error.view.success':\n        if (globalState.error) {\n            // Do not update error if there is already an error page display.\n            // This could cause an endless refresh cycle if a tastic on the\n            // error page tries to fetch data and this errors again.\n            //\n            // The error flag is reset on every route change so that the error\n            // page will be reloaded if the route had changed.\n            return globalState\n        }\n\n        return {\n            ...globalState,\n            error: action.data,\n        }\n\n    default:\n        // Do nothing for other actions\n    }\n\n    return globalState\n}\n\nexport default Loader\n","import Entity from '../entity'\n\nimport _ from 'lodash'\n\n/**\n * Loader classes like this consolidate all loading monitors for a domain\n * concept.\n *\n * They define one (or multiple) load() methods which execute an AJAX call\n * through the Api. You may implement parameter remapping and cache checks in\n * here. For the loaded date there should be a dispatched action through Redux.\n *\n * The Loader also defines a (static) method which handles its own actions and\n * applies the corresponding changes to the global store state.\n */\nlet Loader = function (store, api) {\n    this.store = store\n    this.api = api\n\n    this.find = (parameters) => {\n        this.api.trigger('Frontastic.ApiCoreBundle.App.data', parameters, JSON.stringify(parameters))\n    }\n\n    this.get = (parameters) => {\n        this.api.trigger('Frontastic.ApiCoreBundle.App.get', parameters, parameters.dataId)\n    }\n}\n\nconst initialGlobalState = {\n    data: {},\n}\n\nLoader.handleAction = (globalState = initialGlobalState, action) => {\n    let data = {}\n\n    switch (action.type) {\n    case 'FRONTASTIC_ROUTE':\n        return {\n            data: Entity.purgeMap(globalState.data),\n        }\n    case 'ApiCoreBundle.App.get.success':\n    case 'ApiCoreBundle.App.data.success':\n        data = _.extend({}, globalState.data)\n        data[action.id] = new Entity(action.data, 3600)\n\n        return {\n            ...globalState,\n            data: data,\n        }\n    case 'ApiCoreBundle.App.get.error':\n    case 'ApiCoreBundle.App.data.error':\n        data = _.extend({}, globalState.data)\n        data[action.id] = new Entity().setError(action.error)\n\n        return {\n            ...globalState,\n            data: data,\n        }\n\n    default:\n        // Do nothing for other actions\n    }\n\n    return globalState\n}\n\nexport default Loader\n","import Entity from '../entity'\n\n/**\n * Loader classes like this consolidate all loading monitors for a domain\n * concept.\n *\n * They define one (or multiple) load() methods which execute an AJAX call\n * through the Api. You may implement parameter remapping and cache checks in\n * here. For the loaded date there should be a dispatched action through Redux.\n *\n * The Loader also defines a (static) method which handles its own actions and\n * applies the corresponding changes to the global store state.\n */\nlet Loader = function (store, api) {\n    this.store = store\n    this.api = api\n\n    this.loadTastics = (parameters) => {\n        this.api.trigger('Frontastic.Frontend.Tastic.all', parameters, 'tastic')\n    }\n}\n\nconst initialGlobalState = {\n    tastics: null,\n}\n\nLoader.handleAction = (globalState = initialGlobalState, action) => {\n    let tastics = new Entity()\n\n    switch (action.type) {\n    case 'FRONTASTIC_ROUTE':\n        return {\n            tastics: Entity.purge(globalState.tastics),\n        }\n    case 'Frontend.Tastic.all.success':\n        tastics = new Entity(action.data, 3600)\n\n        return {\n            ...globalState,\n            tastics: tastics,\n        }\n\n    case 'Frontend.Tastic.all.error':\n        // TODO: Handle error\n        return {\n            ...globalState,\n        }\n\n    default:\n        // Do nothing for other actions\n    }\n\n    return globalState\n}\n\nexport default Loader\n","import { combineReducers } from 'redux'\nimport BasketLoader from '../domain/basketLoader'\n\nimport Context from './context'\n\nimport NodeLoader from './loader/node'\nimport DataLoader from './loader/data'\nimport TasticLoader from './loader/tastic'\n\nconst initialGlobalState = {\n    route: null,\n    context: new Context(),\n}\n\nconst reducer = (globalState = initialGlobalState, action) => {\n    if ((typeof PRODUCTION === 'undefined') &&\n        action.type &&\n        (action.type.substr(0, 2) !== '@@') &&\n        console.groupCollapsed) {\n        console.groupCollapsed('%c🔊 %c%s', 'color: gray', 'color: darkmagenta', action.type)\n        console.info(action)\n        console.groupEnd()\n    }\n\n    let context = null\n    switch (action.type) {\n    case 'FRONTASTIC_INIT':\n        return {\n            ...globalState,\n        }\n    case 'FRONTASTIC_ROUTE':\n        return {\n            ...globalState,\n            route: action.route,\n        }\n    case 'ApiBundle.Api.context.success':\n        context = new Context(action.data)\n\n        return {\n            ...globalState,\n            context: context,\n        }\n    case 'ApiBundle.Api.context.error':\n        context = new Context(globalState.context)\n        context.session.message = action.data\n\n        return {\n            ...globalState,\n            context: context,\n        }\n\n    default:\n        // Do nothing for other actions\n    }\n\n    return globalState\n}\n\nexport default combineReducers({\n    app: reducer,\n    node: NodeLoader.handleAction,\n    data: DataLoader.handleAction,\n    tastic: TasticLoader.handleAction,\n    basket: BasketLoader.handleAction,\n})\n","import { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport Entity from './entity'\nimport reducer from './reducer'\n\nlet mountNode = document.getElementById('app')\nlet props = JSON.parse(mountNode.getAttribute('data-props'))\n\nexport default createStore(\n    reducer,\n    {\n        node: {\n            last: {\n                node: new Entity(props.node),\n                data: new Entity(props.data),\n                page: new Entity(props.page),\n            },\n        },\n    },\n    applyMiddleware(thunk)\n)\n","import _ from 'lodash'\nimport RoutePattern from 'route-pattern'\nimport levenshtein from 'fast-levenshtein'\n\nimport { httpBuildQuery } from 'frontastic-common'\n\nimport Context from './context'\n\nlet Router = function (history, routes = {}, context = null) {\n    this.history = history\n    this.routes = routes\n    this.context = context || new Context()\n\n    this.parameterMatcher = /\\{([A-Za-z0-9]+)\\}/g\n\n    this.location = function (route, parameters = {}) {\n        let allParameters = _.extend({}, parameters, this.contextParameters())\n\n        if (!(route in this.routes)) {\n            throw new Error(\n                'Route ' + route + ' not defined, did you mean any of these: ' +\n                this.getSimilarRoutes(route).join(', ')\n            )\n        }\n\n        let keys = []\n        let matches = false\n        while ((matches = this.parameterMatcher.exec(this.routes[route]))) { // eslint-disable-line no-cond-assign\n            keys.push(matches[1])\n        }\n\n        let unknownKeys = _.difference(keys, _.keys(allParameters))\n        if (unknownKeys.length) {\n            throw new Error('Missing values for ' + route + ': ' + unknownKeys.join(', '))\n        }\n\n        let queryKeys = _.difference(_.keys(allParameters), keys)\n        let search = ''\n        if (queryKeys.length) {\n            search = '?' + httpBuildQuery(_.pick(allParameters, queryKeys))\n        }\n\n        return {\n            pathname: _.reduce(\n                keys,\n                function (link, key) {\n                    return link.replace('{' + key + '}', allParameters[key])\n                },\n                this.routes[route]\n            ),\n            search: search,\n        }\n    }\n\n    this.path = function (route, parameters = {}) {\n        let location = this.location(route, parameters)\n        return location.pathname + location.search\n    }\n\n    this.match = function (path) {\n        for (let route in this.routes) {\n            // @TODO: Cache route to pattern compilation?\n            let pattern = RoutePattern.fromString(this.reactRoute(route))\n\n            if (pattern.matches(path)) {\n                return {\n                    route: route,\n                    parameters: pattern.match(path).namedParams || {},\n                }\n            }\n        }\n\n        throw new Error('No defined route match path: ' + path)\n    }\n\n    this.push = function (route, parameters = {}, state = null) {\n        this.history.push(\n            this.location(route, parameters), state\n        )\n    }\n\n    this.replace = function (route, parameters = {}, state = null) {\n        this.history.replace(\n            this.location(route, parameters), state\n        )\n    }\n\n    this.reactRoute = function (route) {\n        if (!(route in this.routes)) {\n            throw new Error(\n                'Route ' + route + ' not defined, did you mean any of these: ' +\n                this.getSimilarRoutes(route).join(', ')\n            )\n        }\n\n        let keys = []\n        let matches = false\n        while ((matches = this.parameterMatcher.exec(this.routes[route]))) { // eslint-disable-line no-cond-assign\n            keys.push(matches[1])\n        }\n\n        return _.reduce(\n            keys,\n            function (link, key) {\n                return link.replace('{' + key + '}', ':' + key)\n            },\n            this.routes[route]\n        )\n    }\n\n    this.setContext = function (context) {\n        this.context = context\n    }\n\n    this.setRoutes = function (routes) {\n        this.routes = routes\n    }\n\n    this.contextParameters = function () {\n        return this.context.toParameters()\n    }\n\n    this.getSimilarRoutes = function (route) {\n        return _.map(\n            _.sortBy(\n                _.mapValues(\n                    this.routes,\n                    function (value, key) {\n                        return {\n                            route: key,\n                            distance: levenshtein.get(key, route),\n                        }\n                    }\n                ),\n                'distance'\n            ).slice(0, 5),\n            'route'\n        )\n    }\n}\n\nexport default Router\n","import UrlContext from './urlContext'\n\nimport _ from 'lodash'\n\nlet Api = function (router, store) {\n    this.router = router\n    this.store = store\n\n    let intervals = []\n\n    let stringifyBody = function (body) {\n        if (body === null || body === undefined) {\n            return null\n        }\n\n        if (typeof body === 'string' || body instanceof String) {\n            return body\n        }\n\n        return JSON.stringify(body)\n    }\n\n    this.request = function (method, route, parameters, body, success, error) { // eslint-disable-line\n        fetch(\n            this.router.path(route, parameters),\n            {\n                method: method,\n                headers: new Headers({\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                }),\n                body: stringifyBody(body),\n                credentials: 'same-origin',\n                cache: 'default',\n            }\n        ).then((response) => {\n            let contentType = response.headers.get('Content-Type')\n            if (contentType && contentType.includes('application/json')) {\n                return response.json().then((json) => {\n                    return {\n                        ok: response.ok,\n                        status: response.status,\n                        json: json,\n                    }\n                })\n            }\n\n            console.error('Unhandled Response Type:', response)\n            if (error) {\n                error({ status: 500, message: 'Internal Server Error' })\n            }\n        }).then((response) => {\n            if (response && response.json && response.json['__DEBUG']) {\n                console.groupCollapsed(\n                    '%c💻 %c%s (%s: %s)',\n                    'color: gray',\n                    'color: lightcoral',\n                    'Server Debug',\n                    method,\n                    route\n                )\n                _.each(response.json['__DEBUG'], (debugLine) => {\n                    console.log(...debugLine)\n                })\n                console.groupEnd()\n            }\n            return response\n        }).then((response) => {\n            if (!response) {\n                console.error('Invalid Response:', response)\n                if (error) {\n                    error({ status: 500, message: 'Internal Server Error' })\n                }\n                return\n            }\n\n            if (response.ok) {\n                if (success) {\n                    return success(response.json, parameters)\n                } else {\n                    return\n                }\n            }\n\n            if (response.status === 403) {\n                this.clearContinuousRequests()\n                this.store.dispatch({ type: 'ApiBundle.Api.context.success', data: { session: {} } })\n                if (this.store.getState().app.route.route !== 'Frontastic.Index.index') {\n                    this.router.replace('Frontastic.Index.index')\n                }\n            }\n\n            if (response.json &&\n                response.json.message &&\n                (typeof response.json.message === 'string')) {\n                console.error('Error:', response.json)\n                if (error && !parameters.hasError) {\n                    this.trigger('Frontastic.Frontend.Master.Error.view', { hasError: true }, 'error')\n                    error(response.json, response.json.stack || null)\n                }\n            } else {\n                console.error('Unhandled Error:', response)\n                if (error) {\n                    error({ status: 500, message: 'Internal Server Error' })\n                }\n            }\n        })\n    }\n\n    this.requestContinuosly = function (method, route, parameters, success, error) {\n        const refreshInterval = this.getReloadInterval()\n        const refreshFunction = () => {\n            this.request(method, route, parameters, null, success, error)\n        }\n\n        refreshFunction()\n        intervals.push({\n            refreshFunction: refreshFunction,\n            refreshInterval: refreshInterval,\n            interval: window.setInterval(refreshFunction, refreshInterval),\n        })\n    }\n\n    this.trigger = (route, parameters, actionId = null) => {\n        let routeKey = route.substr(route.indexOf('.') + 1)\n\n        this.request(\n            'GET',\n            route,\n            parameters,\n            null,\n            (data, parameters) => {\n                this.store.dispatch({\n                    type: routeKey + '.success',\n                    id: actionId,\n                    cacheKey: UrlContext.getActionHash(parameters),\n                    data: data,\n                    parameters: parameters,\n                })\n            },\n            (error) => {\n                this.store.dispatch({\n                    type: routeKey + '.error',\n                    id: actionId,\n                    cacheKey: UrlContext.getActionHash(parameters),\n                    error: error,\n                })\n            }\n        )\n    }\n\n    this.triggerContinuously = (route, parameters, cacheKey = null) => {\n        let routeKey = route.substr(route.indexOf('.') + 1)\n\n        this.requestContinuosly(\n            'GET',\n            route,\n            parameters,\n            (data) => {\n                this.store.dispatch({\n                    type: routeKey + '.success',\n                    id: cacheKey,\n                    data: data,\n                })\n            },\n            (error) => {\n                this.store.dispatch({\n                    type: routeKey + '.error',\n                    id: cacheKey,\n                    error: error,\n                })\n            }\n        )\n    }\n\n    this.pauseRequests = function () {\n        if (!intervals) {\n            return\n        }\n\n        for (let i = 0; i < intervals.length; ++i) {\n            window.clearInterval(intervals[i].interval)\n            intervals[i].interval = null\n        }\n    }\n\n    this.resumeRequests = function () {\n        if (!intervals) {\n            return\n        }\n\n        for (let i = 0; i < intervals.length; ++i) {\n            intervals[i].interval = window.setInterval(\n                intervals[i].refreshFunction,\n                intervals[i].refreshInterval\n            )\n        }\n    }\n\n    this.clearContinuousRequests = function () {\n        this.pauseRequests()\n        intervals = []\n    }\n\n    this.getReloadInterval = function () {\n        return 60 * 1000\n    }\n}\n\nexport default Api\n","import _ from 'lodash'\n\nlet Route = function (route, query, historyState = null) {\n    this.get = function (parameter, fallback = null) {\n        if (this.parameters &&\n            this.parameters[parameter]) {\n            return this.parameters[parameter]\n        }\n\n        return fallback\n    }\n\n    this.has = function (parameter) {\n        return (this.parameters && this.parameters[parameter])\n    }\n\n    for (let property in route) {\n        this[property] = route[property]\n    }\n\n    this.query = query\n    this.urlParameters = _.extend({}, route.parameters)\n    this.parameters = _.extend({}, this.urlParameters, this.query)\n    this.historyState = historyState\n}\n\nexport default Route\n","import app from '../app'\nimport Context from '../context'\n\n/**\n * Special context loader\n */\nlet Loader = function (store, api) {\n    this.store = store\n    this.api = api\n\n    this.refresh = (parameters) => {\n        this.api.request(\n            'GET',\n            'Frontastic.ApiBundle.Api.context',\n            parameters,\n            null,\n            (data) => {\n                let context = new Context(data)\n\n                app.getRouter().setContext(context)\n                app.getRouter().setRoutes(context.routes)\n\n                this.store.dispatch({\n                    type: 'ApiBundle.Api.context.success',\n                    data: data,\n                })\n                app.loadForLocation(window.location)\n            },\n            (error) => {\n                this.store.dispatch({\n                    type: 'ApiBundle.Api.context.error',\n                    data: error,\n                })\n            }\n        )\n    }\n\n    this.login = (email, password) => {\n        this.api.request(\n            'POST',\n            'Frontastic.UserBundle.User.login',\n            null,\n            { email: email, password: password },\n            (json) => {\n                this.refresh()\n            },\n            (json) => {\n                this.store.dispatch({\n                    type: 'ApiBundle.Api.context.error',\n                    data: json.message,\n                })\n            }\n        )\n    }\n}\n\nexport default Loader\n","import Route from './route'\n\nimport ContextLoader from './loader/context'\nimport NodeLoader from './loader/node'\nimport TasticLoader from './loader/tastic'\nimport DataLoader from './loader/data'\n\nimport BasketLoader from '../domain/basketLoader'\n\n/**\n * This class defines which content is to be loaded and written into the global\n * store for which route.\n *\n * For each route there should be a set of load operations which will then\n * populate the global store. The route parameters are parsed from the current\n * path and usually determine the exact entities to load. Thus the route\n * parameters are usually passed to the load() method.\n *\n * If you require re-mapping of those parameters this shiould not be done in\n * here, but in the dedicated loader class.\n */\nlet Loader = function (store, router, api) {\n    this.store = store\n    this.router = router\n    this.api = api\n\n    this.loaders = {\n        context: new ContextLoader(this.store, this.api),\n        node: new NodeLoader(this.store, this.api),\n        tastic: new TasticLoader(this.store, this.api),\n        basket: new BasketLoader(this.store, this.api),\n        data: new DataLoader(this.store, this.api),\n    }\n\n    this.loadContentForPath = function (pathname, query = {}, historyState = null) {\n        this.api.clearContinuousRequests()\n\n        let route = null\n        try {\n            route = new Route(router.match(pathname), query, historyState)\n        } catch (error) {\n            route = new Route({\n                route: 'Frontastic.Frontend.Master.Error.view',\n                parameters: {},\n            }, query, historyState)\n        }\n        this.store.dispatch({\n            type: 'FRONTASTIC_ROUTE',\n            route: route,\n            lastRoute: this.store.getState().app.route,\n        })\n\n        if (typeof PRODUCTION === 'undefined') {\n            console.groupCollapsed('%c🔀 %c%s', 'color: gray', 'color: darkmagenta', route.route)\n            console.info(route)\n            console.groupEnd()\n        }\n\n        // TODO: This re-loads tastic config on every request. Should be done in the background continuously or once?\n        this.loaders.tastic.loadTastics(route.parameters)\n\n        switch (route.route) {\n        case 'Frontastic.Frontend.Master.Category.view':\n        case 'Frontastic.Frontend.Master.Product.view':\n        case 'Frontastic.Frontend.Master.Error.view':\n            this.loaders.node.loadMaster(route.route, route.parameters)\n            break\n        case 'Frontastic.Frontend.Preview.view':\n            this.loaders.node.reloadPreview(route.parameters)\n            break\n        default:\n            if (route.route.substr(0, 5) === 'node_') {\n                route.parameters.nodeId = route.route.substr(5)\n                this.loaders.node.loadNode(route.parameters)\n            }\n        }\n    }\n\n    this.getLoader = function (name) {\n        if (!(name in this.loaders)) {\n            throw new Error('Unknown loader ' + name)\n        }\n\n        return this.loaders[name]\n    }\n}\n\nexport default Loader\n","import store from './store'\nimport history from './history'\nimport Router from './router'\nimport Api from './api'\nimport Loader from './loader'\n\nimport { VisibilityChange, httpParseQuery } from 'frontastic-common'\n\nlet App = function (store, history) {\n    this.store = store\n    this.history = history\n    this.router = new Router(this.history, {\n        'Frontastic.ApiBundle.Api.context': '/api/context',\n    })\n    this.api = new Api(this.router, this.store)\n    this.loader = new Loader(this.store, this.router, this.api)\n\n    this.visibility = new VisibilityChange()\n    this.visibility.registerCallBack(this.api.pauseRequests, this.api.resumeRequests)\n\n    this.loadForLocation = (location) => {\n        this.loader.loadContentForPath(\n            location.pathname,\n            httpParseQuery(location.search.substr(1)),\n            location.state || null\n        )\n    }\n\n    this.getApi = function () {\n        return this.api\n    }\n\n    this.getRouter = function () {\n        return this.router\n    }\n\n    this.getStore = function () {\n        return this.store\n    }\n\n    this.getLoader = function (name) {\n        return this.loader.getLoader(name)\n    }\n\n    if (this.history) {\n        this.history.listen(this.loadForLocation)\n    }\n}\n\nexport default new App(store, history)\n","import { connect } from 'react-redux'\nimport { IntlProvider, addLocaleData } from 'react-intl'\nimport dot from 'dot-object'\n\nimport en from 'react-intl/locale-data/en'\nimport de from 'react-intl/locale-data/de'\n\nimport deMessages from './i18n/de.js'\nimport enMessages from './i18n/en.js'\n\naddLocaleData([...en, ...de])\n\nconst messages = {\n    en: enMessages,\n    de: deMessages,\n}\n\nexport default connect(\n    (globalState) => {\n        let language = globalState.app.context.getLanguage()\n\n        return {\n            locale: language,\n            messages: dot.dot(messages[language] || {}),\n        }\n    }\n)(IntlProvider)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass ErrorBoundary extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            error: null,\n        }\n    }\n\n    componentDidCatch (error, info) {\n        console.warn('Component error', error)\n        this.setState({ error: error })\n    }\n\n    render () {\n        if (this.state.error) {\n            return (<div className='tastic e-tastic--errored'>\n                <p>{this.state.error.toString()}</p>\n            </div>)\n        }\n\n        return this.props.children\n    }\n}\n\nErrorBoundary.propTypes = {\n    children: PropTypes.any,\n}\n\nErrorBoundary.defaultProps = {\n}\n\nexport default ErrorBoundary\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { getTranslation } from 'frontastic-common'\nimport { markdown } from 'markdown'\nimport _ from 'lodash'\n\nimport app from '../app/app'\n\nclass Markdown extends Component {\n    componentDidMount = () => {\n        let links = this.refs.markdown.querySelectorAll('a')\n\n        _.map(links, (link) => {\n            link.onclick = (event) => {\n                event.preventDefault()\n\n                // @TODO: We might need handling for fragment links, too\n                app.getRouter().history.push(link.getAttribute('href'))\n            }\n        })\n    }\n\n    render () {\n        let text = getTranslation(\n            this.props.text,\n            this.props.context.locale,\n            this.props.context.project.defaultLanguage\n        )\n\n        return (<div className='c-markdown s-text' ref='markdown' dangerouslySetInnerHTML={{\n            __html: markdown.toHTML(text.text || ''),\n        }} />)\n    }\n}\n\nMarkdown.propTypes = {\n    context: PropTypes.object.isRequired,\n    text: PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.string,\n    ]).isRequired,\n}\n\nMarkdown.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            context: globalState.app.context,\n            ...props,\n        }\n    }\n)(Markdown)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Markdown from '../../component/markdown'\n\nclass ContentTastic extends Component {\n    render () {\n        let content = this.props.data[this.props.tastic.configuration.stream]\n        if (!content) {\n            return null\n        }\n\n        return (<div className='s-text'>\n            {_.map(content.attributes, (attribute) => {\n                let className = `e-content e-content__${attribute.type} e-content__${attribute.type}--${attribute.attributeId}`\n\n                switch (attribute.type) {\n                case 'Symbol':\n                    return <h1 className={className} key={attribute.attributeId}>{attribute.content}</h1>\n                case 'Text':\n                    return (<div className={className} key={attribute.attributeId}>\n                        <Markdown text={attribute.content} />\n                    </div>)\n                default:\n                    return <div className={className} key={attribute.attributeId}>{attribute.content}</div>\n                }\n            })}\n        </div>)\n    }\n}\n\nContentTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nContentTastic.defaultProps = {\n}\n\nexport default ContentTastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nclass ContentListTastic extends Component {\n    render () {\n        let contentList = this.props.data[this.props.tastic.configuration.stream]\n        if (!contentList) {\n            return null\n        }\n\n        return (<div>\n            <p><small>Showing {contentList.count} results from {contentList.total}</small></p>\n            <ul>\n                {_.map(contentList.items, (content) => {\n                    return <li key={content.contentId}>\n                        <a href='/'>\n                            <strong>{content.name}</strong>\n                            {_.map(content.attributes, (attribute) => {\n                                if (attribute.type !== 'Text') {\n                                    return null\n                                }\n\n                                return (<p key={attribute.attributeId}>\n                                    {attribute.content.substr(0, 200)}…\n                                </p>)\n                            })}\n                        </a>\n                    </li>\n                })}\n            </ul>\n        </div>)\n    }\n}\n\nContentListTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nContentListTastic.defaultProps = {\n}\n\nexport default ContentListTastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Markdown from '../../component/markdown'\n\nclass CategoryDescriptionTastic extends Component {\n    render () {\n        if (!this.props.node.configuration.displayDescription) {\n            return null\n        }\n\n        return <Markdown text={this.props.node.configuration.displayDescription} />\n    }\n}\n\nCategoryDescriptionTastic.propTypes = {\n    node: PropTypes.object.isRequired,\n}\n\nCategoryDescriptionTastic.defaultProps = {\n}\n\nexport default CategoryDescriptionTastic\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport sizer from 'react-sizer'\nimport _ from 'lodash'\n\nimport { MediaApi } from 'frontastic-common'\nimport NoImage from '../layout/noImage.svg'\n\nclass Image extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            loading: true,\n            error: false,\n        }\n    }\n\n    mediaApi = new MediaApi()\n\n    render () {\n        let [width, height] = this.mediaApi.getImageDimensions(\n            this.props.media,\n            this.props.width,\n            this.props.height,\n            this.props.cropRatio\n        )\n\n        if (this.state.error) {\n            return (<img\n                style={this.props.style}\n                width={width}\n                height={height}\n                alt={this.props.media.name}\n                src={NoImage}\n                {...(_.omit(this.props, ['context', 'url', 'alt', 'cropRatio', 'width', 'height', 'dispatch', 'options']))}\n            />)\n        }\n\n        return (<img\n            style={this.props.style}\n            className={this.props.className + (this.state.loading ? 'loading' : 'loaded')}\n            onLoad={() => {\n                this.setState({ loading: false })\n            }}\n            width={width}\n            height={height}\n            alt={this.props.media.name}\n            src={this.mediaApi.getImageLink(\n                this.props.media,\n                this.props.context.project.configuration,\n                this.props.width,\n                this.props.height,\n                this.props.cropRatio,\n                this.props.options\n            )}\n            srcSet={(_.map([1, 2], (factor) => {\n                return [this.mediaApi.getImageLink(\n                    this.props.media,\n                    this.props.context.project.configuration,\n                    this.props.width,\n                    this.props.height,\n                    this.props.cropRatio,\n                    this.props.options\n                ), factor + 'x'].join(' ')\n            })).join(', ')}\n            onError={() => {\n                this.setState({ error: true })\n            }}\n            {...(_.omit(this.props, ['context', 'media', 'cropRatio', 'width', 'height', 'dispatch', 'options']))} />)\n    }\n}\n\nImage.propTypes = {\n    context: PropTypes.object.isRequired,\n    media: PropTypes.object.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    style: PropTypes.object,\n    cropRatio: PropTypes.oneOfType([\n        PropTypes.string,\n        // @DEPRECATED:\n        PropTypes.number,\n    ]),\n    className: PropTypes.string,\n    options: PropTypes.object,\n}\n\nImage.defaultProps = {\n    style: {},\n    cropRatio: null,\n    className: '',\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            ...props,\n            context: globalState.app.context,\n        }\n    }\n)(sizer({\n    getSize: MediaApi.getElementDimensions,\n})(Image))\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Image from '../../image'\n\nclass CategoryImageTastic extends Component {\n    optionsFromSettings = (imageSettings = {}) => {\n        return _.omit(\n            imageSettings,\n            ['media', 'ratio', 'width', 'height']\n        )\n    }\n\n    render () {\n        if (!this.props.node.configuration.displayImage) {\n            return null\n        }\n\n        let image = this.props.node.configuration.displayImage\n        return (<Image\n            media={image.media || {}}\n            cropRatio='5:1'\n            options={this.optionsFromSettings(image)}\n            className='c-hero__image'\n        />)\n    }\n}\n\nCategoryImageTastic.propTypes = {\n    node: PropTypes.object.isRequired,\n}\n\nCategoryImageTastic.defaultProps = {\n}\n\nexport default CategoryImageTastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { connect } from 'react-redux'\n\nimport Image from '../../image'\nimport { getTranslation } from 'frontastic-common'\n\nimport _ from 'lodash'\n\nclass ImageBannerTastic extends Component {\n    render () {\n        const imageSettings = this.props.tastic.schema.get('image')\n        if (!imageSettings) {\n            return null\n        }\n\n        const size = this.props.tastic.schema.get('size') || 'normal'\n        const verticalAlign = this.props.tastic.schema.get('verticalAlign') || 'center'\n        const horizontalAlign = this.props.tastic.schema.get('horizontalAlign') || 'center'\n\n        return (<div className='c-hero'>\n            <figure className='c-hero__figure o-ratio__content'>\n                <Image\n                    media={imageSettings.media || {}}\n                    cropRatio={imageSettings.ratio || '1:1'}\n                    options={this.optionsFromSettings(imageSettings)}\n                    className='c-hero__image'\n                />\n                <figcaption className={classnames([\n                    'c-hero__caption',\n                    'c-hero__caption--' + size,\n                    'c-hero__caption--' + verticalAlign,\n                    'c-hero__caption--' + horizontalAlign,\n                ])}>\n                    {getTranslation(\n                        this.props.tastic.schema.get('caption'),\n                        this.props.context.locale,\n                        this.props.context.project.defaultLanguage\n                    ).text}\n                </figcaption>\n            </figure>\n        </div>)\n    }\n\n    optionsFromSettings = (imageSettings = {}) => {\n        return _.omit(\n            imageSettings,\n            ['media', 'ratio', 'width', 'height']\n        )\n    }\n}\n\nImageBannerTastic.propTypes = {\n    tastic: PropTypes.object.isRequired,\n    context: PropTypes.object.isRequired,\n}\n\nImageBannerTastic.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            ...props,\n            context: globalState.app.context,\n        }\n    }\n)(ImageBannerTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Markdown from '../../component/markdown'\n\nclass MarkdownTastic extends Component {\n    render () {\n        return <Markdown text={this.props.tastic.schema.get('text')} />\n    }\n}\n\nMarkdownTastic.propTypes = {\n    tastic: PropTypes.object.isRequired,\n}\n\nMarkdownTastic.defaultProps = {\n}\n\nexport default MarkdownTastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\n\nimport app from './app'\n\nclass SymfonyLink extends Component {\n    render () {\n        let childProps = _.omit(this.props, ['route', 'params', 'router', 'dispatch'])\n        let params = _.extend({}, this.props.params)\n\n        if (this.props.to || this.props.href) {\n            throw new Error(\"Use route parameter with Symfony route ID to link '\" + (this.props.to || this.props.href) + \"'\")\n        }\n\n        return (<Link\n            to={this.props.path || this.props.router.path(this.props.route, params)}\n            {...childProps}>\n            {this.props.children}\n        </Link>)\n    }\n}\n\nSymfonyLink.propTypes = {\n    router: PropTypes.object.isRequired,\n    route: PropTypes.string,\n    path: PropTypes.string,\n    params: PropTypes.object,\n    to: PropTypes.string,\n    href: PropTypes.string,\n    children: PropTypes.any,\n}\n\nSymfonyLink.defaultProps = {\n    path: '',\n    route: null,\n    params: {},\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            ...props,\n            router: app.getRouter(),\n        }\n    }\n)(SymfonyLink)\n","import { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\n\nclass Price extends Component {\n    locale = () => {\n        return (this.props.context.locale).replace('_', '-')\n    }\n\n    render () {\n        return (this.props.value / 100).toLocaleString(\n            this.locale(),\n            {\n                style: 'currency',\n                currency: this.props.currency,\n            }\n        )\n    }\n}\n\nPrice.propTypes = {\n    context: PropTypes.object.isRequired,\n    value: PropTypes.number.isRequired,\n    currency: PropTypes.string.isRequired,\n}\n\nPrice.defaultProps = {\n    value: 0,\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            context: globalState.app.context,\n            ...props,\n        }\n    }\n)(Price)\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\n\nimport iconBag from '../../../icons/icomoon_icons/SVG/bag.svg'\nimport iconCross from '../../../icons/icomoon_icons/SVG/cross.svg'\nimport Basket from '../../domain/basket'\nimport Price from '../../component/price'\n\nclass MiniBasket extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            showBasket: false,\n        }\n    }\n\n    render () {\n        let basketItems = this.props.basket.getItems()\n\n        return (<Fragment>\n            <button\n                className='c-button c-navbar__button c-cart-link'\n                aria-label='Mein Warenkorb'\n                onClick={() => {\n                    this.setState({ showBasket: true })\n                }} >\n                <img className='o-icon' data-icon='cart' data-icon-size='base' src={iconBag} alt='Cart' />\n                <span className='c-cart-link__badge c-badge c-badge--tiny'>\n                    {this.props.basket.getProductCount()}\n                </span>\n            </button>\n\n            <div className={'c-overlay' + (this.state.showBasket ? ' is-visible' : '')}>\n                <nav className='c-sequential-nav' data-ft-sequential-nav=''>\n                    <div className='c-sequential-nav__panel c-sequential-nav__panel--level-1'>\n                        <div className='c-sequential-nav__header'>\n                            <h3 className='c-sequential-nav__title'>Mein Warenkorb</h3>\n                            <button className='c-sequential-nav__primary-action c-button' onClick={() => {\n                                this.setState({ showBasket: false })\n                            }}>\n                                <img className='o-icon' data-icon='cross' data-icon-size='base' src={iconCross} alt='Close' />\n                            </button>\n                        </div>\n                        <div className='c-sequential-nav__content'>\n                            <table className='o-table o-table--small'>\n                                <tbody>\n                                    {!basketItems.length ?\n                                        <tr><td>Nothing in here…</td></tr> :\n                                        _.map(basketItems, (item) => {\n                                            return (<tr key={item.product.productId + '_' + item.variant.id}>\n                                                <td>\n                                                    {item.product.name}\n                                                </td>\n                                                <td align='right'>\n                                                    {item.count}\n                                                </td>\n                                                <td align='right'>\n                                                    <Price value={item.variant.price} currency={item.variant.currency} />\n                                                </td>\n                                                <td align='right'>\n                                                    <Price value={item.variant.price * item.count} currency={item.variant.currency} />\n                                                </td>\n                                            </tr>)\n                                        })\n                                    }\n                                </tbody>\n                                <tfoot>\n                                    <tr>\n                                        <th colSpan='3' align='left'>\n                                            Sum\n                                        </th>\n                                        <th align='right'>\n                                            <Price currency='EUR' value={_.sumBy(basketItems, (item) => {\n                                                return item.variant.price * item.count\n                                            })} />\n                                        </th>\n                                    </tr>\n                                </tfoot>\n                            </table>\n                        </div>\n                        <div className='c-sequential-nav__footer'>\n                            <button disabled className='c-sequential-nav__primary-action c-button c-button--primary' onClick={() => {\n                                this.setState({ showBasket: false })\n                            }}>\n                                Checkout\n                            </button>\n                        </div>\n                    </div>\n                </nav>\n            </div>\n        </Fragment>)\n    }\n}\n\nMiniBasket.propTypes = {\n    basket: PropTypes.instanceOf(Basket).isRequired,\n}\n\nMiniBasket.defaultProps = {}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            basket: globalState.basket.basket,\n        }\n    }\n)(MiniBasket)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport icons from '../../icons/icomoon_icons/symbol-defs.svg'\n\nclass SvgIcon extends Component {\n    render () {\n        return (<svg\n            version='1.1'\n            xmlns='http://www.w3.org/2000/svg'\n            xlinkHref='http://www.w3.org/1999/xlink'\n            {..._.omit(this.props, ['icon'])}>\n            <use xlinkHref={icons + '#' + this.props.icon} />\n        </svg>)\n    }\n}\n\nSvgIcon.propTypes = {\n    icon: PropTypes.string.isRequired,\n    className: PropTypes.string,\n}\n\nSvgIcon.defaultProps = {\n    className: 'o-icon',\n}\n\nexport default SvgIcon\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Link from '../../app/link'\n\nimport SvgIcon from '../../component/svgIcon'\n\nclass Sequential extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            showChildNavigation: null,\n        }\n    }\n\n    render () {\n        return (<Fragment>\n            <div className={'c-sequential-nav__panel c-sequential-nav__panel--level-' + this.props.level + (this.props.pulledLeft ? ' is-pulled-left' : '')}>\n                <div className='c-sequential-nav__header'>\n                    {this.props.root.name ? <h3 className='c-sequential-nav__title'>{this.props.root.name}</h3> : null}\n                    <button className='c-sequential-nav__primary-action c-button' onClick={this.props.onClose}>\n                        <SvgIcon icon={this.props.level === 1 ? 'cross' : 'arrow-left'} />\n                    </button>\n                </div>\n                <div className='c-sequential-nav__content'>\n                    <ul className='c-tableview'>\n                        {_.map(this.props.root.children, (node) => {\n                            return (<li key={node.nodeId} className='c-tableview__cell'>\n                                <Link\n                                    className={\n                                        'c-tableview__link' +\n                                        (node.configuration.displayHighlightMenuItem ? ' c-tableview__link--primary' : '')\n                                    }\n                                    route={'node_' + node.nodeId}>\n                                    {node.name}\n                                </Link>\n                                {node.children.length ?\n                                    <button\n                                        className='c-button c-tableview__button c-tableview__button--deep'\n                                        onClick={() => {\n                                            this.setState({ showChildNavigation: node.nodeId })\n                                        }}>\n                                        <SvgIcon icon='chevron-right' />\n                                    </button> : null }\n                            </li>)\n                        })}\n                    </ul>\n                </div>\n            </div>\n            {_.map(this.props.root.children, (node) => {\n                if (!node.children.length) {\n                    return null\n                }\n\n                return <Sequential\n                    key={'subtree_' + node.nodeId}\n                    root={node}\n                    level={this.props.level + 1}\n                    pulledLeft={this.state.showChildNavigation === node.nodeId}\n                    onClose={() => {\n                        this.setState({ showChildNavigation: null })\n                    }} />\n            })}\n        </Fragment>)\n    }\n}\n\nSequential.propTypes = {\n    root: PropTypes.object.isRequired,\n    onClose: PropTypes.func.isRequired,\n    pulledLeft: PropTypes.bool,\n    level: PropTypes.number,\n}\n\nSequential.defaultProps = {\n    pulledLeft: false,\n    level: 1,\n}\n\nexport default Sequential\n","import React, { Component, Fragment } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport app from '../../app/app'\nimport Link from '../../app/link'\nimport Entity from '../../app/entity'\n\nimport logo from '../../../layout/logo.svg'\n\nimport MiniBasket from './miniBasket'\nimport Sequential from './sequential'\nimport SvgIcon from '../../component/svgIcon'\n\nclass NavigationTastic extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            showNavigation: false,\n        }\n    }\n\n    componentDidMount () {\n        // @TODO: This is supposed to be already fetched on server side.\n        let root = this.props.tastic.schema.get('root')\n        if (root) {\n            app.getLoader('node').loadTree({\n                root: root,\n                depth: this.props.tastic.schema.get('depth'),\n            })\n        }\n    }\n\n    render () {\n        let customLogo = this.props.tastic.schema.get('logo') || null\n\n        return (<Fragment>\n            <div className='c-navbar'>\n                <button\n                    className='c-button'\n                    disabled={!this.props.tree.isComplete() || !this.props.tree.data.children.length}\n                    onClick={() => {\n                        this.setState({ showNavigation: true })\n                    }}\n                >\n                    <SvgIcon icon='menu' />\n                </button>\n\n                <Link path='/' className='c-logo c-navbar__logo'>\n                    {customLogo && customLogo.media ?\n                        <img className='c-navbar__logo-image' src={customLogo.media.file} alt='Frontastic' /> :\n                        <img className='c-navbar__logo-image' src={logo} alt='Frontastic' />}\n                </Link>\n\n                {this.props.tastic.schema.get('showSearch') ?\n                    <button className='c-button c-navbar__button' disabled>\n                        <SvgIcon icon='search' />\n                    </button> : null}\n\n                {this.props.tastic.schema.get('showBasket') ? <MiniBasket /> : null}\n\n                {this.props.tree.isComplete() && this.props.tree.data.children.length ?\n                    <div className={'c-overlay' + (this.state.showNavigation ? ' is-visible' : '')}>\n                        <nav className='c-sequential-nav' data-ft-sequential-nav=''>\n                            <Sequential\n                                root={this.props.tree.data}\n                                onClose={() => {\n                                    this.setState({ showNavigation: false })\n                                }} />\n                        </nav>\n                    </div> : null}\n            </div>\n            <div className='c-navbar__spacing' />\n        </Fragment>)\n    }\n}\n\nNavigationTastic.propTypes = {\n    tree: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nNavigationTastic.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            ...props,\n            tree: globalState.node.trees[props.tastic.configuration.root || 'root'] || new Entity(),\n        }\n    }\n)(NavigationTastic)\n","export default (globalState, props) => {\n    let product = props.data[props.tastic.configuration.stream]\n    if (!product) {\n        console.warn('No product could be found in streams')\n        return { ...props }\n    }\n\n    let selectedVariant = globalState.app.route.get('_variant', 0)\n    let variant = product.variants[selectedVariant] || null\n    if (!variant) {\n        console.warn('Product variants are always required')\n        return { ...props }\n    }\n\n    // FIXME: Faking this because we do not seem to retrieve it from commerce back-end\n    variant.originalPrice = Math.round(variant.price * (product.name.charCodeAt(1) % 4))\n\n    return {\n        ...props,\n        product: product,\n        variant: variant,\n        selectedVariant: +selectedVariant,\n    }\n}\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport productConnector from '../connector'\n\nclass ProductTitleTastic extends Component {\n    render () {\n        if (!this.props.product || !this.props.variant) {\n            return null\n        }\n\n        let TitleHtmlComponent = this.props.tastic.schema.get('level')\n        return (<div className='c-page-section'>\n            <TitleHtmlComponent className='c-heading-gamma'>\n                {this.props.product.name}\n            </TitleHtmlComponent>\n        </div>)\n    }\n}\n\nProductTitleTastic.propTypes = {\n    tastic: PropTypes.object.isRequired,\n    product: PropTypes.object,\n    variant: PropTypes.object,\n}\n\nProductTitleTastic.defaultProps = {\n    product: null,\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductTitleTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Flickity from 'flickity'\nimport imagesLoaded from 'imagesloaded'\nimport _ from 'lodash'\n\nclass Slider extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            selected: 0,\n            error: null,\n        }\n    }\n\n    componentDidMount = () => {\n        this.flickity = new Flickity(this.refs.carousel, _.extend(\n            {\n                cellSelector: '.c-slider__item',\n                cellAlign: 'left',\n                pageDots: false,\n                prevNextButtons: false,\n                contain: true,\n                draggable: '>1',\n            },\n            this.props.options\n        ))\n\n        this.flickity.on('cellSelect', this.updateSelected)\n\n        if (this.props.imagesLoaded) {\n            imagesLoaded(this.refs.carousel, () => {\n                this.flickity.resize()\n            })\n        }\n    }\n\n    componentDidUpdate = () => {\n        this.flickity.reloadCells()\n\n        if (this.props.imagesLoaded) {\n            imagesLoaded(this.refs.carousel, () => {\n                this.flickity.resize()\n            })\n        }\n    }\n\n    componentWillUnmount = () => {\n        if (this.flickity) {\n            this.flickity.off('cellSelect', this.updateSelected)\n            this.flickity.destroy()\n        }\n    }\n\n    componentDidCatch = (error, info) => {\n        // @HACK: This is a nasty hack. React does not like the custom DOM of\n        // flickity and bails if we reduec the slider item count. We just catch\n        // this error.\n        this.setState({\n            selected: 0,\n            error: error, // This is to fake error handling and make yarn happy\n        })\n    }\n\n    updateSelected = () => {\n        this.setState({\n            selected: this.flickity.selectedIndex,\n        })\n    }\n\n    render () {\n        return (<div className={this.props.className} ref='carousel'>\n            <div className='flickity-viewport'>\n                <div className='flickity-slider'>\n                    {this.props.children}\n                </div>\n            </div>\n        </div>)\n    }\n}\n\nSlider.propTypes = {\n    imagesLoaded: PropTypes.bool,\n    options: PropTypes.object,\n    className: PropTypes.string,\n    children: PropTypes.array,\n}\n\nSlider.defaultProps = {\n    imagesLoaded: true,\n    options: {},\n    className: 'c-slider js-slider',\n}\n\nexport default Slider\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport zoomOut from '../../icons/zoom_out.svg'\nimport zoomIn from '../../icons/zoom_in.svg'\nimport reset from '../../icons/all_out.svg'\n\nconst MIN_SCALE = 1\nconst MAX_SCALE = 4\nconst SETTLE_RANGE = 0.001\nconst ADDITIONAL_LIMIT = 0.2\nconst DOUBLE_TAP_THRESHOLD = 300\nconst ANIMATION_SPEED = 0.04\nconst RESET_ANIMATION_SPEED = 0.16\nconst INITIAL_X = 0\nconst INITIAL_Y = 0\nconst INITIAL_SCALE = 1\n\nconst settle = (val, target, range) => {\n    const lowerRange = val > target - range && val < target\n    const upperRange = val < target + range && val > target\n    return lowerRange || upperRange ? target : val\n}\n\nconst inverse = (x) => x * -1\n\nconst getPointFromEvent = (touch, element) => {\n    const rect = element.getBoundingClientRect()\n    return {\n        x: touch.clientX - rect.left,\n        y: touch.clientY - rect.top,\n    }\n}\n\nconst getMidpoint = (pointA, pointB) => {\n    return {\n        x: (pointA.x + pointB.x) / 2,\n        y: (pointA.y + pointB.y) / 2,\n    }\n}\n\nconst getDistanceBetweenPoints = (pointA, pointB) => {\n    return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\nconst between = (min, max, value) => {\n    return Math.min(max, Math.max(min, value))\n}\n\nconst checkBetween = (m1, m2, value) => {\n    return m1 < m2 ? between(m1, m2, value) : between(m2, m1, value)\n}\n\nclass Zoom extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            x: INITIAL_X,\n            y: INITIAL_Y,\n            scale: INITIAL_SCALE,\n            width: props.width,\n            height: props.height,\n        }\n    }\n\n    componentWillReceiveProps = (props) => {\n        this.setState({\n            x: INITIAL_X,\n            y: INITIAL_Y,\n            scale: INITIAL_SCALE,\n            width: props.width,\n            height: props.height,\n        })\n    }\n\n    zoomTo = (scale, midpoint) => {\n        const frame = () => {\n            if (this.state.scale === scale) {\n                return null\n            }\n\n            const distance = scale - this.state.scale\n            const targetScale = this.state.scale + (ANIMATION_SPEED * distance)\n\n            this.zoom(settle(targetScale, scale, SETTLE_RANGE), midpoint)\n            this.animation = requestAnimationFrame(frame)\n        }\n\n        this.animation = requestAnimationFrame(frame)\n    }\n\n    reset = () => {\n        const frame = () => {\n            if (this.state.scale === INITIAL_SCALE && this.state.x === INITIAL_X && this.state.y === INITIAL_Y) {\n                return null\n            }\n\n            const distance = INITIAL_SCALE - this.state.scale\n            const distanceX = INITIAL_X - this.state.x\n            const distanceY = INITIAL_Y - this.state.y\n\n            const targetScale = settle(this.state.scale + (RESET_ANIMATION_SPEED * distance), INITIAL_SCALE, SETTLE_RANGE)\n            const targetX = settle(this.state.x + (RESET_ANIMATION_SPEED * distanceX), INITIAL_X, SETTLE_RANGE)\n            const targetY = settle(this.state.y + (RESET_ANIMATION_SPEED * distanceY), INITIAL_Y, SETTLE_RANGE)\n\n            const nextWidth = this.props.width * targetScale\n            const nextHeight = this.props.height * targetScale\n\n            this.setState({\n                x: targetX,\n                y: targetY,\n                scale: targetScale,\n                width: nextWidth,\n                height: nextHeight,\n            }, () => {\n                this.animation = requestAnimationFrame(frame)\n            })\n        }\n\n        this.animation = requestAnimationFrame(frame)\n    }\n\n    handleTouchStart = (event) => {\n        this.animation && cancelAnimationFrame(this.animation)\n        if (event.touches.length === 2) {\n            this.handlePinchStart(event)\n        }\n        if (event.touches.length === 1) {\n            this.handleTapStart(event)\n        }\n    }\n\n    handleTouchMove = (event) => {\n        if (event.touches.length === 2) {\n            this.handlePinchMove(event)\n        }\n        if (event.touches.length === 1) {\n            this.handlePanMove(event)\n        }\n    }\n\n    handleTouchEnd = (event) => {\n        if (event.touches.length > 0) {\n            return null\n        }\n\n        if (this.state.scale > MAX_SCALE) {\n            return this.zoomTo(MAX_SCALE, this.lastMidpoint)\n        }\n        if (this.state.scale < MIN_SCALE) {\n            return this.zoomTo(MIN_SCALE, this.lastMidpoint)\n        }\n\n        if (this.lastTouchEnd && this.lastTouchEnd + DOUBLE_TAP_THRESHOLD > event.timeStamp) {\n            this.reset()\n        }\n\n        this.lastTouchEnd = event.timeStamp\n    }\n\n    handleTapStart = (event) => {\n        this.lastPanPoint = getPointFromEvent(event.touches[0], this.container)\n    }\n\n    handlePanMove = (event) => {\n        if (this.state.scale === 1) {\n            return null\n        }\n\n        event.preventDefault()\n\n        const point = getPointFromEvent(event.touches[0], this.container)\n        const nextX = this.state.x + point.x - this.lastPanPoint.x\n        const nextY = this.state.y + point.y - this.lastPanPoint.y\n\n        this.setState({\n            x: between(this.props.width - this.state.width, 0, nextX),\n            y: between(this.props.height - this.state.height, 0, nextY),\n        })\n\n        this.lastPanPoint = point\n    }\n\n    handlePinchStart = (event) => {\n        const pointA = getPointFromEvent(event.touches[0], this.container)\n        const pointB = getPointFromEvent(event.touches[1], this.container)\n        this.lastDistance = getDistanceBetweenPoints(pointA, pointB)\n    }\n\n    handlePinchMove = (event) => {\n        event.preventDefault()\n        const pointA = getPointFromEvent(event.touches[0], this.container)\n        const pointB = getPointFromEvent(event.touches[1], this.container)\n        const distance = getDistanceBetweenPoints(pointA, pointB)\n        const midpoint = getMidpoint(pointA, pointB)\n        const scale = between(MIN_SCALE - ADDITIONAL_LIMIT, MAX_SCALE + ADDITIONAL_LIMIT, this.state.scale * (distance / this.lastDistance))\n\n        this.zoom(scale, midpoint)\n\n        this.lastMidpoint = midpoint\n        this.lastDistance = distance\n    }\n\n    handleWheel = (event) => {\n        event.preventDefault()\n        event.stopPropagation()\n\n        const midpoint = getPointFromEvent(event, this.container)\n        const scale = between(MIN_SCALE - ADDITIONAL_LIMIT, MAX_SCALE + ADDITIONAL_LIMIT, this.state.scale * (1 - event.deltaY / 100))\n        this.zoom(scale, midpoint)\n\n        this.lastMidpoint = midpoint\n        this.lastDistance = 0\n    }\n\n    handleClick = (zoomIn = true) => {\n        let midpoint = {\n            x: this.props.width / 2,\n            y: this.props.height / 2,\n        }\n        this.zoom(this.state.scale * (zoomIn ? 1.5 : 0.75), midpoint)\n\n        this.lastMidpoint = midpoint\n        this.lastDistance = 0\n    }\n\n    zoom = (scale, midpoint) => {\n        const nextWidth = this.props.width * scale\n        const nextHeight = this.props.height * scale\n        const nextX = this.state.x + (inverse(midpoint.x * scale) * (nextWidth - this.state.width) / nextWidth)\n        const nextY = this.state.y + (inverse(midpoint.y * scale) * (nextHeight - this.state.height) / nextHeight)\n\n        this.setState({\n            width: nextWidth,\n            height: nextHeight,\n            x: checkBetween(0, this.props.width - nextWidth, nextX),\n            y: checkBetween(0, this.props.height - nextHeight, nextY),\n            scale,\n        })\n    }\n\n    render () {\n        return (<div\n            ref={(ref) => { this.container = ref }}\n            onTouchStart={this.handleTouchStart}\n            onTouchMove={this.handleTouchMove}\n            onTouchEnd={this.handleTouchEnd}\n            onWheel={this.handleWheel}\n            style={{\n                overflow: 'hidden',\n                width: this.props.width,\n                height: this.props.height,\n            }}\n            >\n            {this.props.children(this.state.x, this.state.y, this.state.scale)}\n            <div className='c-button-overlay'>\n                <button\n                    onClick={() => { this.handleClick(true) }}\n                    className='c-button u-margin-bottom-tiny c-button--small'\n                >\n                    <img src={zoomIn} width='24' height='24' alt='Zoom In' />\n                </button>\n                <button\n                    onClick={() => { this.handleClick(false) }}\n                    className='c-button u-margin-bottom-tiny c-button--small'\n                >\n                    <img src={zoomOut} width='24' height='24' alt='Zoom Out' />\n                </button>\n                <button\n                    className='c-button u-margin-bottom-tiny c-button--small'\n                    onClick={() => { this.reset() }}\n                >\n                    <img src={reset} width='24' height='24' alt='Reset Zoom' />\n                </button>\n            </div>\n        </div>)\n    }\n}\n\nZoom.propTypes = {\n    children: PropTypes.func.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n}\n\nexport default Zoom\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport sizer from 'react-sizer'\nimport _ from 'lodash'\n\nimport { MediaApi } from 'frontastic-common'\nimport NoImage from '../layout/noImage.svg'\n\nclass RemoteImage extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            loading: true,\n            error: false,\n        }\n    }\n\n    mediaApi = new MediaApi()\n\n    render () {\n        let [width, height] = this.mediaApi.getImageDimensions(\n            this.props.url,\n            this.props.width,\n            this.props.height,\n            this.props.cropRatio\n        )\n\n        if (this.state.error) {\n            return (<img\n                style={this.props.style}\n                width={width}\n                height={height}\n                alt={this.props.alt}\n                src={NoImage}\n                {...(_.omit(this.props, ['context', 'url', 'alt', 'cropRatio', 'width', 'height', 'dispatch', 'options']))}\n            />)\n        }\n\n        return (<img\n            style={this.props.style}\n            className={this.state.loading ? 'loading' : 'loaded'}\n            onLoad={() => {\n                this.setState({ loading: false })\n            }}\n            width={width}\n            height={height}\n            alt={this.props.alt}\n            src={this.mediaApi.getImageLink(\n                this.props.url,\n                this.props.context.project.configuration,\n                this.props.width,\n                this.props.height,\n                this.props.cropRatio,\n                this.props.options\n            )}\n            srcSet={(_.map([1, 2], (factor) => {\n                return [this.mediaApi.getImageLink(\n                    this.props.url,\n                    this.props.context.project.configuration,\n                    this.props.width,\n                    this.props.height,\n                    this.props.cropRatio,\n                    this.props.options\n                ), factor + 'x'].join(' ')\n            })).join(', ')}\n            onError={() => {\n                this.setState({ error: true })\n            }}\n            {...(_.omit(this.props, ['context', 'url', 'alt', 'cropRatio', 'width', 'height', 'dispatch', 'options']))}\n        />)\n    }\n}\n\nRemoteImage.propTypes = {\n    context: PropTypes.object.isRequired,\n    url: PropTypes.string.isRequired,\n    alt: PropTypes.string.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    style: PropTypes.object,\n    cropRatio: PropTypes.oneOfType([\n        PropTypes.string,\n        // @DEPRECATED:\n        PropTypes.number,\n    ]).isRequired,\n    options: PropTypes.object,\n}\n\nRemoteImage.defaultProps = {\n    style: {},\n    cropRatio: null,\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            ...props,\n            context: globalState.app.context,\n        }\n    }\n)(sizer({\n    getSize: MediaApi.getElementDimensions,\n})(RemoteImage))\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Slider from '../../../component/slider'\nimport Zoom from '../../../component/zoom'\nimport productConnector from '../connector'\nimport NoImage from '../../../../layout/noImage.svg'\nimport RemoteImage from '../../../remoteImage'\n\nclass ProductImageTastic extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            width: null,\n        }\n    }\n\n    componentDidMount = () => {\n        this.setState({\n            width: this.refs.section.clientWidth,\n        })\n    }\n\n    render () {\n        if (!this.props.product || !this.props.variant) {\n            return null\n        }\n\n        let uniqueImages = _.uniq(_.flatten(_.map(this.props.product.variants, 'images')))\n        if (!uniqueImages.length) {\n            uniqueImages.push(NoImage)\n        }\n\n        return (<div className='c-page-section' ref='section'>\n            <Slider>\n                {_.map(uniqueImages, (image) => {\n                    return (<figure className='c-slider__item js-slider__item c-figure' key={image}>\n                        {this.state.width ? <Zoom width={this.state.width} height={this.state.width / 3 * 2}>\n                            {(x, y, scale) => {\n                                return <RemoteImage\n                                    style={{\n                                        pointerEvents: scale === 1 ? 'auto' : 'none',\n                                        transform: `translate3d(${x}px, ${y}px, 0) scale(${scale})`,\n                                        transformOrigin: '0 0',\n                                    }}\n                                    className='c-teaser__image'\n                                    url={image}\n                                    alt={this.props.product.name}\n                                    cropRatio='3:2'\n                                    options={{ crop: 'pad', background: 'white' }}\n                                />\n                            }}\n                        </Zoom> : null}\n                    </figure>)\n                })}\n            </Slider>\n        </div>)\n    }\n}\n\nProductImageTastic.propTypes = {\n    product: PropTypes.object,\n    variant: PropTypes.object,\n}\n\nProductImageTastic.defaultProps = {\n    product: null,\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductImageTastic)\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { connect } from 'react-redux'\n\nimport Price from '../../../component/price'\nimport productConnector from '../connector'\n\nclass ProductPriceTastic extends Component {\n    render () {\n        if (!this.props.product || !this.props.variant) {\n            return null\n        }\n\n        let showPercent = this.props.tastic.schema.get('showPercent')\n        let showStrikePrice = this.props.tastic.schema.get('showStrikePrice')\n        let isReduced = this.props.variant.originalPrice > this.props.variant.price\n\n        return (<div className='c-page-section'>\n            <ul className='c-price-list'>\n                <li className='c-price-list__item'>\n                    <span\n                        className={classnames({\n                            'c-price': true,\n                            'u-text-l': true,\n                            'c-price--highlight': isReduced && (showPercent || showStrikePrice),\n                        })}\n                    >\n                        <Price value={this.props.variant.price} currency={this.props.variant.currency} />\n                    </span>\n                </li>\n                {this.props.variant.originalPrice && this.props.variant.originalPrice > this.props.variant.price ?\n                    <Fragment>\n                        {showStrikePrice ?\n                            <li className='c-price-list__item'>\n                                <span className='c-price  c-price--old'><del>\n                                    <Price value={this.props.variant.originalPrice} currency={this.props.variant.currency} />\n                                </del></span>\n                            </li> : null}\n                        {showPercent ?\n                            <li className='c-price-list__item'>\n                                <span className='c-highlight'>\n                                    Save {100 - Math.ceil(this.props.variant.price / this.props.variant.originalPrice * 100)} %\n                                </span>\n                            </li> : null}\n                    </Fragment>\n                : null}\n            </ul>\n        </div>)\n    }\n}\n\nProductPriceTastic.propTypes = {\n    tastic: PropTypes.object.isRequired,\n    product: PropTypes.object,\n    variant: PropTypes.object,\n}\n\nProductPriceTastic.defaultProps = {\n    product: null,\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductPriceTastic)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\nimport _ from 'lodash'\n\nimport app from '../../../app/app'\nimport SvgIcon from '../../../component/svgIcon'\nimport productConnector from '../connector'\n\nclass ProductPriceTastic extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            indicateBaskedAdded: false,\n        }\n    }\n\n    ucfirst = (inString) => {\n        return inString.charAt(0).toUpperCase() + inString.slice(1)\n    }\n\n    selectVariant = (variantIndex) => {\n        let parameters = _.extend(\n            {},\n            this.props.route.parameters,\n            { _variant: variantIndex }\n        )\n        app.getRouter().replace(this.props.route.route, parameters)\n    }\n\n    addToCart = (variantIndex) => {\n        app.getLoader('basket').add(this.props.product, this.props.variant, 1)\n\n        this.setState(\n            { indicateBaskedAdded: true },\n            _.debounce(() => {\n                this.setState({ indicateBaskedAdded: false })\n            }, 600)\n        )\n    }\n\n    getVariantAttributes = () => {\n        let attributeValues = {}\n        for (let variant of this.props.product.variants) {\n            for (let attribute in variant.attributes) {\n                if (!attributeValues[attribute]) {\n                    attributeValues[attribute] = []\n                }\n\n                attributeValues[attribute].push(variant.attributes[attribute])\n            }\n        }\n\n        return _.keys(_.pickBy(\n            _.mapValues(attributeValues, _.uniq),\n            (values) => {\n                return values.length > 1\n            }\n        ))\n    }\n\n    render () {\n        if (!this.props.product || !this.props.variant) {\n            return null\n        }\n\n        let showVariants = this.props.tastic.schema.get('showVariants') || true\n        let showNameInVariants = this.props.tastic.schema.get('showNameInVariants') || false\n        let showPriceInVariants = this.props.tastic.schema.get('showPriceInVariants') || true\n        let variantAttributes = _.intersection(\n            this.getVariantAttributes(),\n            this.props.tastic.schema.get('variantAttributes') || ['color', 'size', 'style']\n        )\n\n        return (<div className='c-page-section'>\n            <SvgIcon\n                className={classNames(\n                    'o-icon  c-figure__icon  c-badge  c-badge--invert',\n                    {\n                        'fade-exiting': !this.state.indicateBaskedAdded,\n                        'fade-appeared': this.state.indicateBaskedAdded,\n                    }\n                )}\n                icon='check'\n                data-icon-size='xxl'\n            />\n\n            <form className='c-form' action=''>\n                {showVariants || (this.props.product.variants.length) > 1 ?\n                    <div className='c-form__item'>\n                        <select\n                            className='c-form__select'\n                            value={this.props.selectedVariant}\n                            onChange={(event) => {\n                                this.selectVariant(event.currentTarget.value)\n                            }}\n                        >\n                            {_.map(this.props.product.variants, (variant, index) => {\n                                return (<option value={index} key={index}>\n                                    {showNameInVariants ? this.props.product.name + ' ' : null}\n                                    {_.map(variantAttributes, (attribute) => {\n                                        return this.ucfirst(attribute) + ': ' + variant.attributes[attribute]\n                                    }).join('; ')}\n                                    {showPriceInVariants ?\n                                        ' – ' + (variant.price / 100).toLocaleString(\n                                            (this.props.context.locale).replace('_', '-'),\n                                            { style: 'currency', currency: variant.currency }\n                                        )\n                                    : null}\n                                </option>)\n                            })}\n                        </select>\n                    </div> : null}\n\n                <div className='c-form__item'>\n                    <button\n                        disabled={!this.props.variant.isOnStock}\n                        className='c-button  c-button--primary  c-button--full'\n                        onClick={(event) => {\n                            event.preventDefault()\n                            this.addToCart(this.props.selectedVariant)\n                        }}\n                    >\n                        Add to cart\n                    </button>\n                </div>\n            </form>\n        </div>)\n    }\n}\n\nProductPriceTastic.propTypes = {\n    context: PropTypes.object.isRequired,\n    route: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n    product: PropTypes.object,\n    variant: PropTypes.object,\n    selectedVariant: PropTypes.number,\n}\n\nProductPriceTastic.defaultProps = {\n    product: null,\n    variant: null,\n    selectVariant: 0,\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            context: globalState.app.context,\n            route: globalState.app.route,\n            ...props,\n        }\n    }\n)(connect(productConnector)(ProductPriceTastic))\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\n\nimport Markdown from '../../../component/markdown'\nimport productConnector from '../connector'\n\nclass ProductDescriptionTastic extends Component {\n    ucFirst (string) {\n        return string.charAt(0).toUpperCase() + string.slice(1)\n    }\n\n    render () {\n        if (!this.props.product) {\n            return null\n        }\n\n        if (this.props.variant && !this.props.product.description) {\n            let displayAttributes = [\n                'color',\n                'designer',\n                'size',\n                'style',\n            ]\n\n            return (<div className='s-text'>\n                <ul>\n                    {_.map(displayAttributes, (attribute) => {\n                        if (!this.props.variant.attributes[attribute]) {\n                            return null\n                        }\n\n                        return (<li key={attribute}>\n                            <strong>{this.ucFirst(attribute)}</strong>: {this.props.variant.attributes[attribute]}\n                        </li>)\n                    })}\n                </ul>\n            </div>)\n        }\n\n        return <Markdown text={this.props.product.description} />\n    }\n}\n\nProductDescriptionTastic.propTypes = {\n    product: PropTypes.object,\n    variant: PropTypes.object,\n}\n\nProductDescriptionTastic.defaultProps = {\n    product: null,\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductDescriptionTastic)\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\n\nimport ProductTitle from './title/tastic.jsx'\nimport ProductImage from './image/tastic.jsx'\nimport ProductPrice from './price/tastic.jsx'\nimport ProductAddToCart from './addToCart/tastic.jsx'\nimport ProductDescription from './description/tastic.jsx'\n\nclass ProductTastic extends Component {\n    render () {\n        return (<Fragment>\n            <ProductImage data={this.props.data} tastic={this.props.tastic} />\n            <ProductTitle data={this.props.data} tastic={this.props.tastic} />\n            <ProductPrice data={this.props.data} tastic={this.props.tastic} />\n            <ProductAddToCart data={this.props.data} tastic={this.props.tastic} />\n            <ProductDescription data={this.props.data} tastic={this.props.tastic} />\n        </Fragment>)\n    }\n}\n\nProductTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nProductTastic.defaultProps = {\n}\n\nexport default ProductTastic\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport productConnector from '../connector'\n\nclass ProductBrandTastic extends Component {\n    render () {\n        if (!this.props.product || !this.props.variant || !this.props.variant.attributes.designer) {\n            return null\n        }\n\n        let BrandHtmlComponent = this.props.tastic.schema.get('level')\n        return (<div className='c-page-section'>\n            <BrandHtmlComponent className='c-heading-zeta'>\n                {this.props.variant.attributes.designer}\n            </BrandHtmlComponent>\n        </div>)\n    }\n}\n\nProductBrandTastic.propTypes = {\n    tastic: PropTypes.object.isRequired,\n    product: PropTypes.object,\n    variant: PropTypes.object,\n}\n\nProductBrandTastic.defaultProps = {\n    product: null,\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductBrandTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { FormattedRelative, FormattedDate } from 'react-intl'\n\nimport productConnector from '../connector'\nimport icon from '../../../../layout/fastDelivery.svg'\n\nclass ProductStockTastic extends Component {\n    ucFirst = (string) => {\n        return string.charAt(0).toUpperCase() + string.slice(1)\n    }\n\n    getNextOrderTime = () => {\n        let date = new Date()\n        date.setHours(17)\n        date.setMinutes(0)\n\n        if (date < new Date()) {\n            date.setDate(date.getDate() + 1)\n        }\n\n        return date\n    }\n\n    getNextDeliveryDay = () => {\n        let date = new Date()\n        date.setDate(date.getDate() + 2)\n\n        while (date.getDay() < 2) {\n            date.setDate(date.getDate() + 2)\n        }\n\n        return date\n    }\n\n    render () {\n        if (!this.props.variant) {\n            return null\n        }\n\n        if (this.props.variant.isOnStock) {\n            return (<div className='o-layout o-layout-small'>\n                <div className='o-layout__item u-1/4' align='right'>\n                    <img src={icon} alt='Fast Delivery' />\n                </div>\n                <div className='o-layout__item u-3/4'>\n                    <p>\n                        <strong>Express Delivery</strong>: Order in the next <em>\n                            <FormattedRelative value={this.getNextOrderTime()} />\n                        </em> for a delivery until <em>\n                            <FormattedDate value={this.getNextDeliveryDay()} day='numeric' month='long' />\n                        </em>.\n                    </p>\n                </div>\n            </div>)\n        } else {\n            return <p>Variant sold out right now.</p>\n        }\n    }\n}\n\nProductStockTastic.propTypes = {\n    variant: PropTypes.object,\n}\n\nProductStockTastic.defaultProps = {\n    variant: null,\n}\n\nexport default connect(productConnector)(ProductStockTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\n\nimport Link from '../app/link'\nimport NoImage from '../../layout/noImage.svg'\nimport RemoteImage from '../remoteImage'\nimport Price from './price'\n\nclass ProductBox extends Component {\n    render () {\n        let product = this.props.product\n        let variant = this.props.variant || product.variants[0]\n\n        // FIXME: Faking this because we do not seem to retrieve it from commerce back-end\n        variant.originalPrice = Math.round(variant.price * (product.name.charCodeAt(1) % 4))\n\n        let isReduced = variant.originalPrice > variant.price\n        return (<article className='c-teaser  o-block' itemScope itemType='http://schema.org/Product'>\n            <Link itemProp='url' className='c-teaser__full-link'\n                route='Frontastic.Frontend.Master.Product.view'\n                params={{ id: product.productId, slug: product.slug }}>\n\n                <figure className='c-teaser__figure  o-block__figure'>\n                    <RemoteImage\n                        className='c-teaser__image'\n                        url={variant.images[0] || NoImage}\n                        alt={product.name}\n                        cropRatio='1:1'\n                        itemProp='image'\n                        options={{ crop: 'pad', background: 'white' }}\n                    />\n                </figure>\n                <div className='o-block__body'>\n                    <div className='c-teaser__body'>\n                        <div className='c-teaser__caption'>\n                            <h3 className='c-teaser__title  c-heading-teaser' itemProp='name'>\n                                {product.name}\n                            </h3>\n                            {variant.attributes.designer ?\n                                <div className='c-heading-teaser-subheading'>{variant.attributes.designer}</div>\n                            : null}\n                        </div>\n                        <div className='c-teaser__prices' itemScope itemType='http://schema.org/Offer'>\n                            <span itemProp='price'\n                                className={classnames({\n                                    'c-teaser__price': true,\n                                    'c-price': true,\n                                    'c-price--highlight': isReduced && (this.props.showPercent || this.props.showStrikePrice),\n                                })}\n                            >\n                                <Price value={variant.price} currency={variant.currency} />\n                            </span>\n                            {isReduced && this.props.showStrikePrice ?\n                                <span className='c-price  c-price--old'><del>\n                                    <Price value={variant.originalPrice} currency={variant.currency} />\n                                </del></span> : null}\n                            {isReduced && this.props.showPercent ?\n                                <span className='c-highlight'>\n                                    -&nbsp;{100 - Math.ceil(variant.price / variant.originalPrice * 100)}%\n                                </span> : null}\n                        </div>\n                    </div>\n                </div>\n            </Link>\n        </article>)\n    }\n}\n\nProductBox.propTypes = {\n    product: PropTypes.object.isRequired,\n    variant: PropTypes.object,\n    showStrikePrice: PropTypes.bool,\n    showPercent: PropTypes.bool,\n}\n\nProductBox.defaultProps = {\n    showStrikePrice: true,\n    showPercent: true,\n    variant: null,\n}\n\nexport default ProductBox\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Product from '../../component/productBox'\n\nclass ProductListTastic extends Component {\n    render () {\n        let productList = this.props.data[this.props.tastic.configuration.stream]\n        if (!productList) {\n            return null\n        }\n\n        let showPercent = this.props.tastic.schema.get('showPercent') || true\n        let showStrikePrice = this.props.tastic.schema.get('showStrikePrice') || true\n\n        return (<div className='o-layout'>\n            {_.map(productList.items, (product) => {\n                return (<div key={product.productId} className='o-layout__item u-1/2 u-1/3@lap u-1/4@desk'>\n                    <Product\n                        product={product}\n                        showPercent={showPercent}\n                        showStrikePrice={showStrikePrice}\n                    />\n                </div>)\n            })}\n        </div>)\n    }\n}\n\nProductListTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nProductListTastic.defaultProps = {\n}\n\nexport default ProductListTastic\n","import 'rc-slider/assets/index.css'\n\nimport React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { Range } from 'rc-slider'\n\nclass PriceFacetPane extends PureComponent {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            range: null,\n        }\n    }\n\n    static getDerivedStateFromProps = (props, state) => {\n        if (!state.range || !props.valueFromTastic) {\n            return {\n                range: [\n                    _.toInteger((props.facetValue || {}).min || props.facet.min),\n                    _.toInteger((props.facetValue || {}).max || props.facet.max),\n                ],\n            }\n        }\n        return null\n    }\n\n    render () {\n        let min = this.props.facet.min\n        let max = this.props.facet.max\n        let step = this.props.facet.step || 1\n\n        return (<div className='c-range-selector'>\n            <form className='c-form' action=''>\n\n                <div className='c-range-selector__text-fields'>\n\n                    <div className='c-form__item-inline'>\n                        <input\n                            name='price-range-min'\n                            type='number'\n                            className='c-form__input-text'\n                            value={(this.state.range[0] / 100).toFixed(2)}\n                            min={min / 100}\n                            max={this.state.range[1] / 100}\n                            step={step / 100}\n                            onChange={this.updateLower}\n                        />\n                    </div>\n\n                    <div className='c-form__item-inline'>\n                        <input\n                            name='price-range-max'\n                            type='number'\n                            className='c-form__input-text'\n                            value={(this.state.range[1] / 100).toFixed(2)}\n                            min={(this.state.range[0] / 100)}\n                            max={max / 100}\n                            step={step / 100}\n                            onChange={this.updateUpper}\n                        />\n                    </div>\n\n                </div>\n\n                <div className='c-form__item'>\n                    <Range\n                        min={min}\n                        max={max}\n                        step={step}\n                        value={this.state.range}\n                        allowCross={false}\n                        onChange={(range) => {\n                            this.updateRange(range)\n                        }}\n                        trackStyle={[{ backgroundColor: 'black' }, { backgroundColor: 'black' }]}\n                        handleStyle={[{ borderColor: 'black' }, { borderColor: 'black' }]}\n                        railStyle={{ backgroundColor: 'grey' }}\n                    />\n                </div>\n\n            </form>\n        </div>)\n    }\n\n    updateRange = (range) => {\n        this.setState({\n            range: _.cloneDeep(range),\n        }, this.updateFacet)\n    }\n\n    updateLower = (e) => {\n        let range = _.cloneDeep(this.state.range)\n        range[0] = Math.floor(e.currentTarget.value * 100)\n        this.updateRange(range)\n    }\n\n    updateUpper = (e) => {\n        let range = _.cloneDeep(this.state.range)\n        range[1] = Math.ceil(e.currentTarget.value * 100)\n        this.updateRange(range)\n    }\n\n    updateFacet = _.debounce(() => {\n        if (_.isEqual(this.state.range, [this.props.facet.min, this.props.facet.max])) {\n            this.props.removeFacetValue(this.props.facet)\n        } else {\n            this.props.selectFacetValue(\n                this.props.facet,\n                {\n                    min: this.state.range[0],\n                    max: this.state.range[1],\n                }\n            )\n        }\n    }, 100)\n}\n\nPriceFacetPane.propTypes = {\n    facet: PropTypes.object.isRequired,\n    facetValue: PropTypes.object,\n    valueFromTastic: PropTypes.bool,\n    selectFacetValue: PropTypes.func.isRequired,\n    removeFacetValue: PropTypes.func.isRequired,\n}\n\nPriceFacetPane.defaultProps = {\n    valueFromTastic: false,\n}\n\nexport default PriceFacetPane\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Price from '../../../component/price'\n\nclass PriceFacetTitle extends Component {\n    render () {\n        return (\n            <Fragment>\n                <span>{this.props.name || this.props.facet.key}</span>\n                {this.props.facet.selected\n                    ? <span>\n                        <span> (</span>\n                        <Price value={parseInt(this.props.facet.value.min, 10)} currency='EUR' />\n                        <span> - </span>\n                        <Price value={parseInt(this.props.facet.value.max, 10)} currency='EUR' />\n                        <span>)</span>\n                    </span>\n                    : null\n                }\n            </Fragment>\n        )\n    }\n}\n\nPriceFacetTitle.propTypes = {\n    facet: PropTypes.object.isRequired,\n    name: PropTypes.string,\n}\n\nPriceFacetTitle.defaultProps = {}\n\nexport default PriceFacetTitle\n","import _ from 'lodash'\n\nfunction toggleTerm (facet, term, selectFacetValue, removeFacetValue) {\n    let selectedTerms = _.filter(facet.terms, { selected: true })\n\n    if (_.includes(selectedTerms, term)) {\n        _.pull(selectedTerms, term)\n    } else {\n        selectedTerms.push(term)\n    }\n\n    if (!selectedTerms.length) {\n        removeFacetValue(facet)\n    } else {\n        selectFacetValue(\n            facet,\n            {\n                terms: _.map(selectedTerms, (term) => {\n                    return term.handle\n                }),\n            }\n        )\n    }\n}\n\nexport default toggleTerm\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport toggleTerm from '../toggleTerm'\n\nclass TermFacetPane extends Component {\n    render () {\n        const facet = this.props.facet\n\n        // TODO: Handle term selection state through URL provided facetValue\n        return (<ul className='c-tableview'>\n            {_.map(\n                facet.terms,\n                (term) => {\n                    return (<li key={term.handle} className='c-tableview__cell'>\n                        <button\n                            className={'c-button c-tableview__button' + (term.selected ? ' is-active' : '')}\n                            onClick={() => {\n                                toggleTerm(facet, term, this.props.selectFacetValue, this.props.removeFacetValue)\n                            }}>\n                            {term.name}\n                        </button>\n                    </li>)\n                }\n            )}\n        </ul>)\n    }\n}\n\nTermFacetPane.propTypes = {\n    facet: PropTypes.object.isRequired,\n    // facetValue: PropTypes.object,\n    selectFacetValue: PropTypes.func.isRequired,\n    removeFacetValue: PropTypes.func.isRequired,\n}\n\nTermFacetPane.defaultProps = {}\n\nexport default TermFacetPane\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nclass TermFacetTitle extends Component {\n    render () {\n        return (\n            <Fragment>\n                {this.props.name || this.props.facet.key}\n                {this.props.facet.selected\n                    ? ' (' + this.renderSelectionPreview(this.props.facet.terms) + ')'\n                    : null\n                }\n            </Fragment>\n        )\n    }\n\n    renderSelectionPreview = (terms) => {\n        let selectedTermNames = _.map(_.filter(terms, 'selected'), (term) => {\n            return term.name\n        })\n\n        return _.slice(selectedTermNames, 0, 3).join(', ') +\n            (selectedTermNames.length > 3 ? ', …' : '')\n    }\n}\n\nTermFacetTitle.propTypes = {\n    facet: PropTypes.object.isRequired,\n    name: PropTypes.string,\n}\n\nTermFacetTitle.defaultProps = {}\n\nexport default TermFacetTitle\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport iconCross from '../../../icons/icomoon_icons/SVG/cross.svg'\nimport iconArrowLeft from '../../../icons/icomoon_icons/SVG/arrow-left.svg'\n\nimport PriceFacetPane from './price/priceFacetPane'\nimport PriceFacetTitle from './price/priceFacetTitle'\nimport TermFacetPane from './term/termFacetPane'\nimport TermFacetTitle from './term/termFacetTitle'\n\nclass SelectionPane extends Component {\n    facetMap = {\n        'variants.attributes.style.key': {\n            name: 'Style',\n            selector: TermFacetPane,\n            title: TermFacetTitle,\n        },\n        'variants.price.centAmount': {\n            name: 'Price',\n            selector: PriceFacetPane,\n            title: PriceFacetTitle,\n        },\n        'variants.attributes.gender.key': {\n            name: 'Gender',\n            selector: TermFacetPane,\n            title: TermFacetTitle,\n        },\n        'variants.attributes.designer': {\n            name: 'Designer',\n            selector: TermFacetPane,\n            title: TermFacetTitle,\n        },\n        'variants.attributes.color.key': {\n            name: 'Color',\n            selector: TermFacetPane,\n            title: TermFacetTitle,\n        },\n\n    }\n\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            displayFacetDetails: null,\n        }\n    }\n\n    render () {\n        const facetsToShow = _.filter(this.props.facets, (facet) => {\n            return (this.facetMap[facet.key])\n        })\n\n        return (<Fragment>\n            <div className={'c-overlay' + (this.props.show ? ' is-visible c-overlay-outsidevabar-isvisible' : '')}>\n                <nav className='c-sequential-nav' data-ft-sequential-nav=''>\n                    {/* 1 = level, should be higher on selected filter */}\n                    <div className={'c-sequential-nav__panel c-sequential-nav__panel--level-1'}>\n                        <div className='c-sequential-nav__header'>\n                            <h3 className='c-sequential-nav__title'>Filter</h3>\n                            <button className='c-sequential-nav__primary-action c-button' onClick={this.props.onClose}>\n                                <img className='o-icon' data-icon='cross' data-icon-size='base' src={iconCross} alt='Close' />\n                            </button>\n                        </div>\n                        <div className='c-sequential-nav__content'>\n                            <ul className='c-tableview'>\n                                {_.map(\n                                    facetsToShow,\n                                    (facet) => {\n                                        const TitleComponent = this.facetMap[facet.key].title\n                                        const name = this.facetMap[facet.key].name || null\n\n                                        return (<li key={facet.handle} className='c-tableview__cell'>\n                                            <button\n                                                className={'c-button c-tableview__button' + (facet.selected ? ' is-active' : '')}\n                                                onClick={() => {\n                                                    this.showFacet(facet)\n                                                }}>\n                                                {<TitleComponent facet={facet} facetValue={this.getFacetValue(facet)} name={name} />}\n                                            </button>\n                                        </li>)\n                                    }\n                                )}\n                            </ul>\n                        </div>\n                    </div>\n                    {_.map(facetsToShow, this.renderFacetPane)}\n                </nav>\n            </div>\n\n        </Fragment>)\n    }\n\n    getFacetValue = (facet) => {\n        return this.props.facetValues[facet.handle] || null\n    }\n\n    renderFacetPane = (facet) => {\n        const ComponentClass = this.facetMap[facet.key].selector\n\n        return (<div\n            key={'details-' + facet.handle}\n            className={'c-sequential-nav__panel' +\n                ' c-sequential-nav__panel--level-2' +\n                (this.state.displayFacetDetails === facet.key ? ' is-pulled-left' : '')}\n            >\n            <div className='c-sequential-nav__header'>\n                <h3 className='c-sequential-nav__title'>{this.facetMap[facet.key].name}</h3>\n                <button className='c-sequential-nav__primary-action c-button' onClick={this.closeFacet}>\n                    <img className='o-icon' data-icon='cross' data-icon-size='base' src={iconArrowLeft} alt='Return' />\n                </button>\n            </div>\n            <div className='c-sequential-nav__content'>\n                <ComponentClass facet={facet} facetValue={this.getFacetValue(facet)} valueFromTastic={this.props.valuesFromTastic} selectFacetValue={this.props.selectFacetValue} removeFacetValue={this.props.removeFacetValue} />\n            </div>\n        </div>)\n    }\n\n    showFacet = (facet) => {\n        this.setState({\n            displayFacetDetails: facet.key,\n        })\n    }\n\n    closeFacet = () => {\n        this.setState({\n            displayFacetDetails: null,\n        })\n    }\n}\n\nSelectionPane.propTypes = {\n    facets: PropTypes.array.isRequired,\n    facetValues: PropTypes.object.isRequired,\n    valuesFromTastic: PropTypes.bool.isRequired,\n    show: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    selectFacetValue: PropTypes.func.isRequired,\n    removeFacetValue: PropTypes.func.isRequired,\n}\n\nSelectionPane.defaultProps = {\n    show: false,\n}\n\nexport default SelectionPane\n","import React, { Component, Fragment } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport SvgIcon from '../../component/svgIcon'\nimport SelectionPane from './selectionPane'\n\nimport toggleTerm from './toggleTerm'\n\nimport app from '../../app/app'\n\nclass ProductListFilterTastic extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            showFilterSelection: false,\n        }\n    }\n\n    render () {\n        let productList = this.props.data[this.props.tastic.configuration.stream]\n        if (!productList || !productList.facets || productList.facets.length === 0) {\n            console.warn('Product list does not contain facets. Won\\'t display filter tastic.')\n            return null\n        }\n        return (<Fragment>\n            {this.renderCategorySelector(productList)}\n\n            <button\n                className='c-button  c-button--secondary  c-button--full u-margin-bottom'\n                data-ft-sequential-nav-controls='js-ft-sequential-nav-filter'\n                onClick={this.showFilterSelection}\n            >\n                <SvgIcon icon='sliders' />\n                <span>Filter</span>\n            </button>\n\n            <SelectionPane\n                onClose={this.closeFilterSelection}\n                facets={productList.facets}\n                show={this.state.showFilterSelection}\n                selectFacetValue={this.selectFacetValue}\n                removeFacetValue={this.removeFacetValue}\n                facetValues={this.getFacetValues(this.props.tastic.configuration.stream)}\n                valuesFromTastic={!!this.props.route.historyState && this.props.route.historyState.comeFromTastic}\n            />\n\n        </Fragment>)\n    }\n\n    componentDidMount = () => {\n        // Indicate that we have processed the current URL\n        this.replaceUrl(this.getCurrentStreamParameters())\n    }\n\n    getFacetValues = (streamId) => {\n        if (this.props.streamParameters[streamId]) {\n            return this.props.streamParameters[streamId].facets || {}\n        }\n        return {}\n    }\n\n    selectFacetValue = (facet, value) => {\n        let streamParameters = this.getCurrentStreamParameters()\n\n        _.set(\n            streamParameters,\n            [this.props.tastic.configuration.stream, 'facets', facet.handle],\n            _.extend(\n                {\n                    type: facet.type,\n                    handle: facet.handle,\n                },\n                value\n            )\n        )\n\n        this.updateUrl(streamParameters)\n    }\n\n    removeFacetValue = (facet) => {\n        let streamParameters = this.getCurrentStreamParameters()\n\n        _.unset(\n            streamParameters,\n            [this.props.tastic.configuration.stream, 'facets', facet.handle],\n        )\n\n        this.updateUrl(streamParameters)\n    }\n\n    updateUrl = (streamParameters) => {\n        const newParameters = this.deriveRouteParameters({\n            s: streamParameters,\n        })\n\n        app.getRouter().push(this.props.route.route, newParameters, { comeFromTastic: true })\n    }\n\n    replaceUrl = (streamParameters) => {\n        const newParameters = this.deriveRouteParameters({\n            s: streamParameters,\n        })\n\n        app.getRouter().replace(this.props.route.route, newParameters, { comeFromTastic: true })\n    }\n\n    deriveRouteParameters = (updatedParameters) => {\n        return _.extend(\n            {},\n            // nodeId comes from route itself already\n            _.omit(this.props.route.parameters, ['nodeId', 'environment', 'project', 'locale']),\n            updatedParameters\n        )\n    }\n\n    getCurrentStreamParameters = () => {\n        return _.cloneDeep(this.props.route.parameters.s || {})\n    }\n\n    closeFilterSelection = () => {\n        this.setState({ showFilterSelection: false })\n    }\n\n    showFilterSelection = () => {\n        this.setState({ showFilterSelection: true })\n    }\n\n    renderCategorySelector = (productList) => {\n        /*\n         * TODO: Is the category-list really part of the filter tastic or is it a dedicated one? What happens to\n         * filters applied when selecting a different category?\n         */\n        const categoryFacet = this.getCategoryFacet(productList.facets)\n        return (<div className='c-filter-bar'>\n            <fieldset className='c-filter-bar__scrollable'>\n                {_.map(this.filterCategoryTerms(categoryFacet.terms), (term) => {\n                    return (\n                        <label key={term.handle} className='c-filter-bar__item' htmlFor={'filter-' + term.handle}>\n                            <input\n                                className='u-hidden-visually'\n                                name='filter-checkboxes'\n                                type='checkbox'\n                                id={'filter-' + term.handle}\n                                value={term.selected}\n                                onChange={(e) => {\n                                    toggleTerm(categoryFacet, term, this.selectFacetValue, this.removeFacetValue)\n                                }}\n                            />\n                            <span className='c-filter-bar__button'>{term.name}</span>\n                        </label>\n                    )\n                })}\n            </fieldset>\n        </div>)\n    }\n\n    filterCategoryTerms = (terms) => {\n        return _.uniqBy(terms, 'name')\n    }\n\n    getCategoryFacet = (facets, count = 10) => {\n        let facet = null\n\n        for (let i = 0; i < facets.length; i++) {\n            facet = facets[i]\n\n            if (facet.key === 'category_tree_terms') {\n                break\n            }\n        }\n\n        if (!facet) {\n            throw new Error('No category facet found')\n        }\n\n        _.remove(facet.terms, (term) => {\n            return term.value === '_'\n        })\n\n        facet.terms = _.take(_.reverse(_.sortBy(facet.terms, 'count')), count)\n\n        return facet\n    }\n}\n\nProductListFilterTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n    route: PropTypes.object.isRequired,\n    streamParameters: PropTypes.object.isRequired,\n}\n\nProductListFilterTastic.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        let streamParameters = globalState.app.route.parameters.s || {}\n\n        return {\n            ...props,\n            route: globalState.app.route,\n            streamParameters: streamParameters,\n        }\n    }\n)(ProductListFilterTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Slider from '../../component/slider'\nimport Product from '../../component/productBox'\n\nclass ProductSliderTastic extends Component {\n    render () {\n        let productList = this.props.data[this.props.tastic.configuration.stream]\n        if (!productList) {\n            return null\n        }\n\n        let productsToShow = _.take(productList.items, this.props.tastic.schema.get('productCount'))\n        let showPercent = this.props.tastic.schema.get('showPercent') || true\n        let showStrikePrice = this.props.tastic.schema.get('showStrikePrice') || true\n\n        return (<Slider>\n            {_.map(productsToShow, (product) => {\n                return (<div className='c-slider__item  js-slider__item  u-3/4  u-2/5@lap  u-2/7@desk' key={product.productId}>\n                    <Product\n                        product={product}\n                        showPercent={showPercent}\n                        showStrikePrice={showStrikePrice}\n                    />\n                </div>)\n            })}\n        </Slider>)\n    }\n}\n\nProductSliderTastic.propTypes = {\n    data: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nProductSliderTastic.defaultProps = {\n}\n\nexport default ProductSliderTastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport _ from 'lodash'\n\nimport app from '../../app/app'\nimport Entity from '../../app/entity'\nimport Markdown from '../../component/markdown'\n\nimport Image from '../../image'\n\nclass TeaserTastic extends Component {\n    componentDidMount () {\n        // @TODO: This is supposed to be already fetched on server side.\n        let teaser = this.props.tastic.schema.get('teaser')\n        if (teaser) {\n            app.getLoader('data').get({ app: 'teaser', dataId: teaser })\n        }\n    }\n\n    optionsFromSettings (imageSettings = {}) {\n        return _.omit(\n            imageSettings,\n            ['media', 'ratio', 'width', 'height']\n        )\n    }\n\n    render () {\n        if (!this.props.teaser.isComplete()) {\n            return null\n        }\n\n        const teaser = this.props.teaser.data\n        return (<div className='o-layout'>\n            <div className='o-layout__item u-1/2@lap' style={{ marginBottom: '1.5em' }}>\n                {teaser.image1 ? <Image\n                    media={teaser.image1.media || {}}\n                    cropRatio={teaser.image1.ratio || '3:1'}\n                    options={this.optionsFromSettings(teaser.image1)}\n                /> : null}\n            </div>\n            <div className='o-layout__item u-1/2@lap'>\n                <Markdown text={teaser.text2} />\n            </div>\n            <div className='o-layout__item u-1/2@lap u-hide-until@lap'>\n                <Markdown text={teaser.text3} />\n            </div>\n            <div className='o-layout__item u-1/2@lap' style={{ marginBottom: '1.5em' }}>\n                {teaser.image4 ? <Image\n                    media={teaser.image4.media || {}}\n                    cropRatio={teaser.image4.ratio || '3:1'}\n                    options={this.optionsFromSettings(teaser.image4)}\n                /> : null}\n            </div>\n            <div className='o-layout__item u-1/2@lap u-hide-from@lap'>\n                <Markdown text={teaser.text3} />\n            </div>\n        </div>)\n    }\n}\n\nTeaserTastic.propTypes = {\n    teaser: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nTeaserTastic.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        let teaser = null\n        if (props.tastic.configuration.teaser) {\n            teaser = globalState.data.data[props.tastic.configuration.teaser] || null\n        }\n\n        return {\n            teaser: teaser || new Entity(),\n            ...props,\n        }\n    }\n)(TeaserTastic)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { getTranslation } from 'frontastic-common'\n\nclass TextTastic extends Component {\n    render () {\n        let text = getTranslation(\n            this.props.tastic.schema.get('text'),\n            this.props.context.locale,\n            this.props.context.project.defaultLanguage\n        )\n\n        return <div className='text'>{text.text}</div>\n    }\n}\n\nTextTastic.propTypes = {\n    context: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n}\n\nTextTastic.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            context: globalState.app.context,\n            ...props,\n        }\n    }\n)(TextTastic)\n","import Content from './content/tastic.jsx'\nimport ContentList from './contentList/tastic.jsx'\nimport CategoryDescription from './categoryDescription/tastic.jsx'\nimport CategoryImage from './categoryImage/tastic.jsx'\nimport ImageBanner from './imageBanner/tastic.jsx'\nimport Markdown from './markdown/tastic.jsx'\nimport Navigation from './navigation/tastic.jsx'\nimport Product from './product/tastic.jsx'\nimport ProductTitle from './product/title/tastic.jsx'\nimport ProductImage from './product/image/tastic.jsx'\nimport ProductBrand from './product/brand/tastic.jsx'\nimport ProductPrice from './product/price/tastic.jsx'\nimport ProductAddToCart from './product/addToCart/tastic.jsx'\nimport ProductDescription from './product/description/tastic.jsx'\nimport ProductStock from './product/stock/tastic.jsx'\nimport ProductList from './productList/tastic.jsx'\nimport ProductListFilter from './productListFilter/tastic.jsx'\nimport ProductSlider from './productSlider/tastic.jsx'\nimport Teaser from './teaser/tastic.jsx'\nimport Text from './text/tastic.jsx'\n\nexport default (() => {\n    return {\n        'content': Content,\n        'contentList': ContentList,\n        'categoryDescription': CategoryDescription,\n        'categoryImage': CategoryImage,\n        'imageBanner': ImageBanner,\n        'markdown': Markdown,\n        'navigation': Navigation,\n        'productList': ProductList,\n        'productListFilter': ProductListFilter,\n        'product': Product,\n        'product-title': ProductTitle,\n        'product-image': ProductImage,\n        'product-brand': ProductBrand,\n        'product-addToCart': ProductAddToCart,\n        'product-description': ProductDescription,\n        'product-stock': ProductStock,\n        'product-price': ProductPrice,\n        'productSlider': ProductSlider,\n        'teaser': Teaser,\n        'text': Text,\n    }\n})()\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport ErrorBoundary from '../app/errorBoundary'\n\nimport tastics from '../tastic/tastics'\n\nclass Tastic extends Component {\n    render () {\n        let tastic = this.props.tastic\n\n        if (!tastics[tastic.tasticType]) {\n            return (<div className='alert alert-warning'>\n                <p>Tastic {tastic.tasticType} not yet implemented.</p>\n                <p>Did you just implement it? Please don't forget to register it in the <code>tastic.jsx</code>!</p>\n            </div>)\n        }\n        let Tastic = tastics[tastic.tasticType]\n\n        return (<ErrorBoundary>\n            <div className={'tastic ' +\n                    (tastic.schema.get('mobile') ? '' : 'e-tastic--hidden-hand ') +\n                    (tastic.schema.get('tablet') ? '' : 'e-tastic--hidden-lap ') +\n                    (tastic.schema.get('desktop') ? '' : 'e-tastic--hidden-desk ')\n                }\n                style={{\n                    outline: (_.isEqual(tastic.tasticId, this.props.highlight) ? '2px dashed #d73964' : null),\n                }}>\n                <Tastic tastic={tastic} node={this.props.node} page={this.props.page} data={this.props.data} />\n            </div>\n        </ErrorBoundary>)\n    }\n}\n\nTastic.propTypes = {\n    node: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    tastic: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    highlight: PropTypes.any,\n}\n\nTastic.defaultProps = {\n}\n\nexport default Tastic\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Tastic from './tastic'\n\nclass Cell extends Component {\n    columnMap = {\n        '12': 'e-cell--12',\n        '6': 'e-cell--6',\n        '4': 'e-cell--4',\n        '3': 'e-cell--3',\n    }\n\n    render () {\n        let cell = this.props.cell\n        let columns = cell.schema.get('size') || '12'\n\n        return (<div className={'e-cell ' +\n                (cell.schema.get('mobile') ? '' : 'e-cell--hidden-hand ') +\n                (cell.schema.get('tablet') ? '' : 'e-cell--hidden-lap ') +\n                (cell.schema.get('desktop') ? '' : 'e-cell--hidden-desk ') +\n                ' ' + this.columnMap[columns]\n            }\n            style={{\n                margin: '0px',\n                padding: '0px',\n                float: 'none',\n                outline: (cell.cellId === this.props.highlight ? '2px dashed #30a0bf' : null),\n            }}>\n            {cell && cell.tastics && cell.tastics.length ?\n            _.map(cell.tastics, (tastic, i) => {\n                return (<Tastic key={tastic.tasticId}\n                    highlight={this.props.highlight}\n                    node={this.props.node}\n                    page={this.props.page}\n                    data={this.props.data}\n                    region={this.props.region}\n                    cell={cell}\n                    tastic={tastic}\n                />)\n            }) : null}\n        </div>)\n    }\n}\n\nCell.propTypes = {\n    node: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    region: PropTypes.object.isRequired,\n    cell: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    highlight: PropTypes.any,\n}\n\nCell.defaultProps = {\n    highlight: null,\n}\n\nexport default Cell\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport Cell from './cell'\n\nclass Region extends Component {\n    render () {\n        let region = this.props.region\n        if (!region) {\n            return null\n        }\n\n        return (<div className={'e-region ' +\n                (region.schema.get('mobile') ? '' : 'e-region--hidden-hand ') +\n                (region.schema.get('tablet') ? '' : 'e-region--hidden-lap ') +\n                (region.schema.get('desktop') ? '' : 'e-region--hidden-desk ')\n            }\n            style={{\n                display: 'flex',\n                // Do those settings make any sense anyways?\n                flexDirection: 'row', // region.schema.get('flexDirection'),\n                flexWrap: 'wrap', // region.schema.get('flexWrap'),\n                justifyContent: region.schema.get('justifyContent'),\n                alignItems: region.schema.get('alignItems'),\n                alignContent: region.schema.get('alignContent'),\n                outline: (region.regionId === this.props.highlight ? '2px dashed #a1d8e7' : null),\n            }}>\n            {region && region.elements && region.elements.length ?\n            _.map(region.elements, (cell, i) => {\n                return (<Cell key={cell.cellId}\n                    highlight={this.props.highlight}\n                    node={this.props.node}\n                    page={this.props.page}\n                    data={this.props.data}\n                    region={region}\n                    cell={cell}\n                />)\n            }) : null}\n        </div>)\n    }\n}\n\nRegion.propTypes = {\n    node: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    region: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    highlight: PropTypes.any,\n}\n\nRegion.defaultProps = {\n    highlight: null,\n}\n\nexport default Region\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Region from './region'\n\nclass Layout extends Component {\n    render () {\n        if (this.props.page.layoutId === 'kit') {\n            return (<main className='c-page-body'>\n                <div className='c-page-wrapper o-wrapper'>\n                    <Region\n                        identifier='kit'\n                        region={this.props.page.regions.kit}\n                        highlight={this.props.highlight}\n                        data={this.props.data}\n                        node={this.props.node}\n                        page={this.props.page} />\n                </div>\n            </main>)\n        }\n\n        return (<Fragment>\n            <header className='c-page-head'>\n                {this.props.page.regions.head ? <Region\n                    identifier='head'\n                    region={this.props.page.regions.head}\n                    highlight={this.props.highlight}\n                    data={this.props.data}\n                    node={this.props.node}\n                    page={this.props.page} /> : null}\n            </header>\n            <main className='c-page-body'>\n                <div className='c-page-wrapper o-wrapper'>\n                    {this.props.page.regions.main ? <Region\n                        identifier='main'\n                        region={this.props.page.regions.main}\n                        highlight={this.props.highlight}\n                        data={this.props.data}\n                        node={this.props.node}\n                        page={this.props.page} /> : null}\n                </div>\n            </main>\n            <footer className='c-page-foot'>\n                {this.props.page.regions.footer ? <Region\n                    identifier='footer'\n                    region={this.props.page.regions.footer}\n                    highlight={this.props.highlight}\n                    data={this.props.data}\n                    node={this.props.node}\n                    page={this.props.page} /> : null}\n            </footer>\n        </Fragment>)\n\n        /*\n         * @TODO: This is the genric layout which we replaced by this hardcoded\n         * template. Handle this somehow:\n            {_.map(this.props.page.regions, (region, regionId) => {\n                return (<div className='row' key={regionId}>\n                    <div className='col-xs-12'>\n                        <Region\n                            identifier='regionId'\n                            region={region}\n                            highlight={this.props.highlight}\n                            data={this.props.data}\n                            page={this.props.page}\n                        />\n                    </div>\n                </div>)\n            })}\n         */\n    }\n}\n\nLayout.propTypes = {\n    node: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    highlight: PropTypes.any,\n}\n\nLayout.defaultProps = {\n    highlight: null,\n}\n\nexport default Layout\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport DefaultLayout from './layout'\nimport { Page } from 'frontastic-common'\n\nclass PageView extends Component {\n    constructor (props) {\n        super(props)\n\n        this.layouts = {\n            // @TODO: Add more complex layouts here\n        }\n\n        this.state = {\n            page: new Page(props.page || {}, _.keys(props.page.regions), props.tastics || []),\n        }\n    }\n\n    componentWillUpdate (props) {\n        if (!_.isEqual(this.props.page, props.page)) {\n            this.setState({\n                page: new Page(props.page || {}, _.keys(props.page.regions), props.tastics || []),\n            })\n        }\n    }\n\n    getLayout () {\n        if (!this.state.page.layoutId) {\n            return DefaultLayout\n        }\n\n        return this.layouts[this.state.page.layoutId] || DefaultLayout\n    }\n\n    render () {\n        let Layout = this.getLayout()\n\n        return <Layout\n            node={this.props.node}\n            page={this.state.page}\n            data={!_.isArray(this.props.data) ? this.props.data : {}}\n            highlight={this.props.highlight} />\n    }\n}\n\nPageView.propTypes = {\n    node: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    tastics: PropTypes.array.isRequired,\n    highlight: PropTypes.any,\n}\n\nPageView.defaultProps = {\n    highlight: null,\n}\n\nexport default PageView\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport { Transition } from 'react-transition-group'\n\nimport Spinner from '../../layout/loading.svg'\n\nclass LoadingState extends Component {\n    render () {\n        let isLoading = !this.props.entity || this.props.entity.loading\n        let isErrored = !!(this.props.entity && this.props.entity.error)\n        let size = this.props.large ? 128 : 32\n\n        return (<Fragment>\n            <Transition appear in={isLoading || isErrored} timeout={115}>\n                {(state) => {\n                    return (<div className={'fade-' + state}>\n                        <div className='c-overlay is-visible'>\n                            <div className='c-loading'>\n                                <img src={Spinner} width={size} height={size} alt='Loading' />\n                            </div>\n                        </div>\n                    </div>)\n                }}\n            </Transition>\n        </Fragment>)\n    }\n}\n\nLoadingState.propTypes = {\n    large: PropTypes.bool,\n    entity: PropTypes.object,\n}\n\nLoadingState.defaultProps = {\n    large: false,\n    entity: null,\n}\n\nexport default LoadingState\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n\nimport app from './app/app'\n\nimport Page from './page/page'\nimport Entity from './app/entity'\nimport Loading from './app/loading'\n\nclass Preview extends Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            highlight: null,\n        }\n    }\n\n    componentDidMount () {\n        this.connectWebSocket()\n\n        window.addEventListener('message', this.highlight.bind(this), false)\n    }\n\n    componentDidUpdate (prevProps) {\n        if (prevProps.context.environment !== this.props.context.environment) {\n            this.webSocket.close()\n            this.webSocket = null\n            this.connectWebSocket()\n        }\n    }\n\n    componentWillUnmount () {\n        window.removeEventListener('message', this.highlight.bind(this), false)\n    }\n\n    highlight (event) {\n        // @TODO: Verify event origin\n        if (!event.isTrusted) {\n            return\n        }\n\n        this.setState({ highlight: event.data.item })\n    }\n\n    connectWebSocket () {\n        if (!this.props) {\n            // If called when page is closing, web socket disconnects, but the\n            // component does not exist any more\n            return\n        }\n\n        let socketUrl = ((this.props.context.environment === 'dev') ?\n            'ws://demo.frontastic.io.local:8080' :\n            'wss://demo.frontastic.io:8080') +\n            '/ws?preview=' + this.props.previewId\n\n        this.webSocket = new WebSocket(socketUrl)\n        this.webSocket.onmessage = (event) => {\n            let message = JSON.parse(event.data)\n            switch (message.Name) {\n            case 'Refresh':\n                app.getLoader('node').reloadPreview({ preview: this.props.previewId })\n                break\n            case 'Highlight':\n                this.setState({ highlight: message.Payload.item })\n                break\n            case 'EndHighlight':\n                this.setState({ highlight: null })\n                break\n            case 'Ping':\n                // Ignore\n                break\n            default:\n                console.info(message)\n                // Do nothing for other messages\n            }\n        }\n        this.webSocket.onclose = this.connectWebSocket\n    }\n\n    webSocket = null\n\n    render () {\n        if (!this.props.tastics.isComplete()) {\n            return <Loading large entity={this.props.tastics} />\n        }\n\n        return (<div className='s-preview'>\n            {this.props.tastics.isComplete() ?\n                <Page\n                    node={this.props.node.data || {}}\n                    page={this.props.page.data || {}}\n                    data={this.props.data.data || {}}\n                    highlight={this.state.highlight}\n                    tastics={this.props.tastics.data}\n                />\n            : null}\n            <Loading large entity={this.props.data} />\n        </div>)\n    }\n}\n\nPreview.propTypes = {\n    previewId: PropTypes.string.isRequired,\n    node: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    tastics: PropTypes.object.isRequired,\n    context: PropTypes.object.isRequired,\n}\n\nPreview.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        let previewId = globalState.app.route.get('preview')\n        return {\n            previewId: previewId,\n            node: globalState.node.nodes[globalState.node.previewId] ||\n                globalState.node.last.node,\n            data: globalState.node.nodeData[globalState.node.currentCacheKey] ||\n                globalState.node.last.data,\n            page: globalState.node.pages[globalState.node.previewId] ||\n                globalState.node.last.page,\n            tastics: globalState.tastic.tastics || new Entity(),\n            context: globalState.app.context,\n        }\n    }\n)(Preview)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { Scrollbars } from 'react-custom-scrollbars'\n\nimport Entity from './app/entity'\nimport Loading from './app/loading'\n\nimport Page from './page/page'\n\nclass Node extends Component {\n    render () {\n        if (!this.props.tastics.isComplete()) {\n            return <Loading large entity={this.props.tastics} />\n        }\n\n        return (<div className='s-node'>\n            {this.props.tastics.isComplete() ?\n                <Scrollbars autoHide style={{ height: '100vh', width: '100vw' }}>\n                    <Page\n                        node={this.props.node.data || { configuration: {} }}\n                        page={this.props.page.data || {}}\n                        data={this.props.data.data || {}}\n                        tastics={this.props.tastics.data}\n                    />\n                </Scrollbars>\n            : null}\n            <Loading large entity={this.props.data} />\n        </div>)\n    }\n}\n\nNode.propTypes = {\n    node: PropTypes.object.isRequired,\n    data: PropTypes.object.isRequired,\n    page: PropTypes.object.isRequired,\n    tastics: PropTypes.object.isRequired,\n}\n\nNode.defaultProps = {\n}\n\nexport default connect(\n    (globalState, props) => {\n        return {\n            node: globalState.node.nodes[globalState.node.currentNodeId] ||\n                globalState.node.last.node,\n            data: globalState.node.nodeData[globalState.node.currentCacheKey] ||\n                globalState.node.last.data,\n            page: globalState.node.pages[globalState.node.currentNodeId] ||\n                globalState.node.last.page,\n            tastics: globalState.tastic.tastics || new Entity(),\n        }\n    }\n)(Node)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router, Switch, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport _ from 'lodash'\n\nimport app from './app/app'\nimport IntlProvider from './app/intlProvider'\nimport store from './app/store'\nimport Context from './app/context'\nimport history from './app/history'\n\nimport Preview from './preview'\nimport Node from './node'\n\nlet mountNode = document.getElementById('app')\n\nlet appData = mountNode.getAttribute('data-app')\nif (appData) {\n    let data = JSON.parse(appData)\n    store.dispatch({\n        type: 'ApiBundle.Api.context.success',\n        data: data,\n    })\n\n    let context = new Context(data)\n\n    app.getRouter().setContext(context)\n    app.getRouter().setRoutes(context.routes)\n\n    app.loadForLocation(window.location)\n} else {\n    app.getLoader('context').refresh()\n}\n\nReactDOM.render((\n    <Provider store={app.getStore()}>\n        <IntlProvider>\n            <Router history={history}>\n                <Switch>\n                    <Route exact\n                        path={app.getRouter().reactRoute('Frontastic.Frontend.Preview.view')}\n                        component={Preview}\n                    />\n\n                    {_.toArray(_.mapValues(\n                        app.getRouter().routes,\n                        (path, route) => {\n                            if (route.substr(0, 5) !== 'node_') {\n                                return null\n                            }\n\n                            return (<Route exact\n                                key={route}\n                                path={app.getRouter().reactRoute(route)}\n                                component={Node}\n                            />)\n                        }\n                    ))}\n\n                    <Route exact\n                        path={app.getRouter().reactRoute('Frontastic.Frontend.Master.Product.view')}\n                        component={Node}\n                    />\n                    <Route exact\n                        path={app.getRouter().reactRoute('Frontastic.Frontend.Master.Category.view')}\n                        component={Node}\n                    />\n\n                    <Route component={Node} />\n                </Switch>\n            </Router>\n        </IntlProvider>\n    </Provider>),\nmountNode\n)\n","module.exports = __webpack_public_path__ + \"assets/media/noImage.53271a59.svg\";","module.exports = __webpack_public_path__ + \"assets/media/cross.e52a6014.svg\";","module.exports = __webpack_public_path__ + \"assets/media/loading.8c029291.svg\";","module.exports = __webpack_public_path__ + \"assets/media/arrow-left.e565580d.svg\";","module.exports = __webpack_public_path__ + \"assets/media/fastDelivery.37ce5beb.svg\";","module.exports = __webpack_public_path__ + \"assets/media/all_out.cd6adf68.svg\";","module.exports = __webpack_public_path__ + \"assets/media/zoom_in.01cb7f57.svg\";","module.exports = __webpack_public_path__ + \"assets/media/zoom_out.a2a52161.svg\";","module.exports = __webpack_public_path__ + \"assets/media/symbol-defs.ee9b0a0e.svg\";","module.exports = __webpack_public_path__ + \"assets/media/bag.7a566efc.svg\";","module.exports = __webpack_public_path__ + \"assets/media/logo.e3a7e4e9.svg\";"],"sourceRoot":""}